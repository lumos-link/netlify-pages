<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>分类分级管理 - 数据资产管理系统</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <style>
    body { 
      background: #ffffff;
      min-height: 100vh;
      position: relative;
    }
    .content-card { 
      background: rgba(255, 255, 255, 0.95); 
      backdrop-filter: blur(10px);
      border-radius: 1rem; 
      box-shadow: 0 4px 20px rgba(37, 99, 235, 0.15);
      transition: all 0.3s ease;
    }
    
    .content-card:hover {
      box-shadow: 0 8px 30px rgba(37, 99, 235, 0.2);
      transform: translateY(-2px);
    }
    .tab-item {
      cursor: pointer;
      transition: all 0.2s;
      border-bottom: 2px solid transparent;
    }
    .tab-item.active {
      border-bottom-color: #2563eb;
      color: #2563eb;
      font-weight: 600;
    }
    .tree-item {
      cursor: pointer;
      transition: all 0.2s;
    }
    .tree-item:hover {
      background: rgba(59, 130, 246, 0.1);
    }
    .tree-item.active {
      background: rgba(59, 130, 246, 0.2);
      color: #2563eb;
      font-weight: 600;
    }
    .tree-arrow {
      transition: transform 0.2s;
    }
    .tree-arrow.rotated {
      transform: rotate(90deg);
    }
    .btn-primary {
      background: #2563eb;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      font-weight: 600;
      transition: all 0.2s;
    }
    .btn-primary:hover {
      background: #1d4ed8;
    }
    .btn-secondary {
      background: white;
      color: #2563eb;
      border: 1px solid #2563eb;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      font-weight: 600;
      transition: all 0.2s;
    }
    .btn-secondary:hover {
      background: #2563eb;
      color: white;
    }
    
    /* 文件上传区域样式 */
    .upload-area {
      border: 2px dashed #d1d5db;
      border-radius: 0.5rem;
      padding: 2rem;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    .upload-area:hover {
      border-color: #2563eb;
      background-color: #f8fafc;
    }
    .upload-area.dragover {
      border-color: #2563eb;
      background-color: #eff6ff;
    }
    
    /* 表格样式 */
    .preview-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1rem;
    }
    .preview-table th,
    .preview-table td {
      border: 1px solid #e5e7eb;
      padding: 0.75rem;
      text-align: left;
    }
    .preview-table th {
      background-color: #f9fafb;
      font-weight: 600;
      color: #374151;
    }
    .preview-table tr:nth-child(even) {
      background-color: #f9fafb;
    }
    .preview-table tr:hover {
      background-color: #f3f4f6;
    }
    
    /* 响应式优化 */
    @media (max-width: 768px) {
      main {
        padding-left: 1rem !important;
        padding-right: 1rem !important;
      }
    }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <!-- 顶部主导航栏 -->
  <header class="bg-gradient-to-r from-red-900 via-red-800 to-red-900 shadow flex items-center justify-between px-10 h-16 sticky top-0 z-20">
    <div class="flex items-center space-x-4">
      <div class="h-10 w-10 rounded-full border-2 border-red-400 shadow bg-white flex items-center justify-center">
          <svg class="h-6 w-6 text-red-500" fill="currentColor" viewBox="0 0 20 20">
            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
        </div>
      <span class="text-xl font-bold text-white tracking-wide whitespace-nowrap">数据资产管理系统</span>
    </div>
    <nav class="flex-1 flex items-center justify-center space-x-8">
    </nav>
    <div class="flex items-center space-x-4">
      <a href="首页.html" class="text-red-100 hover:text-red-400 font-medium px-3 py-1 rounded border border-red-400 hover:bg-red-700 transition">
        <i class="fas fa-home mr-2"></i>返回首页
      </a>
      <div class="relative" id="user-dropdown">
        <div class="flex items-center space-x-2 cursor-pointer hover:bg-red-700 px-2 py-1 rounded-lg transition" onclick="toggleUserDropdown()">
          <img src="https://i.pravatar.cc/32?img=3" class="rounded-full w-8 h-8 border-2 border-red-200" alt="用户头像">
          <span class="text-red-100 text-sm">张三</span>
          <i class="fas fa-chevron-down text-xs text-red-300 transition-transform" id="dropdown-arrow"></i>
        </div>
        <div id="user-dropdown-menu" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-gray-200 py-2 hidden z-50">
          <a href="个人中心.html" class="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 transition">
            <i class="fas fa-user-circle mr-3 text-red-500"></i>
            个人中心
          </a>
          <a href="#" class="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 transition">
            <i class="fas fa-cog mr-3 text-red-500"></i>
            系统管理
          </a>
          <div class="border-t border-gray-200 my-1"></div>
          <a href="#" class="flex items-center px-4 py-2 text-red-600 hover:bg-red-50 transition">
            <i class="fas fa-sign-out-alt mr-3"></i>
            退出
          </a>
        </div>
      </div>
    </div>
  </header>
  
  <!-- 可收起平台导航栏 -->
  <aside id="sidebar" class="fixed top-16 left-0 min-h-[calc(100vh-4rem)] w-60 bg-gradient-to-b from-red-900 to-red-800 border-r border-red-700 shadow-xl z-30 transition-transform duration-300">
    <div class="flex items-center justify-between px-4 py-3 border-b border-white border-opacity-20">
      <span class="text-lg font-bold text-red-100">平台导航</span>
    </div>
    <ul class="mt-4 space-y-2 px-4">
      
      <!-- 资源盘点登记 -->
      <li>
        <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 cursor-pointer" onclick="toggleSubMenu('inventory')">
          <div class="flex items-center gap-3">
            <i class="fas fa-clipboard-list"></i>
            <span>资源盘点登记</span>
          </div>
          <i class="fas fa-chevron-down text-xs transition-transform" id="inventory-arrow"></i>
        </div>
        <ul id="inventory-submenu" class="ml-6 mt-2 space-y-1 hidden">
          <li><a href="数据来源管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-database"></i> 数据来源管理</a></li>
          <li><a href="数据资源扫描.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-database"></i> 数据资源扫描</a></li>
          <li><a href="数据资源.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-database"></i> 数据资源盘点</a></li>
          <li><a href="资产属性管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-cogs"></i> 资产属性管理</a></li>
          <li><a href="资产标签管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-tag"></i> 资产标签管理</a></li>
          <li><a href="资产目录管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-sitemap"></i> 资产目录管理</a></li>
          <li><a href="数据分类管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-database"></i> 数据分类管理</a></li>
          <li><a href="数据分级管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-layer-group"></i> 数据分级管理</a></li>
        </ul>
      </li>
      
      <!-- 资产确权与管理 -->
      <li>
        <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 cursor-pointer" onclick="toggleSubMenu('rights')">
          <div class="flex items-center gap-3">
            <i class="fas fa-gavel"></i>
            <span>资产确权与管理</span>
          </div>
          <i class="fas fa-chevron-down text-xs transition-transform" id="rights-arrow"></i>
        </div>
        <ul id="rights-submenu" class="ml-6 mt-2 space-y-1 hidden">
          <li><a href="内部申请记录.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-user-shield"></i> 内部申请记录</a></li>
          <li><a href="授权链路记录.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-link"></i> 授权链路记录</a></li>
          
          <li><a href="权属证明记录.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-certificate"></i> 权属证明记录</a></li>
        </ul>
      </li>
      
      <!-- 资产开发管理 -->
      <li>
        <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 cursor-pointer" onclick="toggleSubMenu('development')">
          <div class="flex items-center gap-3">
            <i class="fas fa-code"></i>
            <span>资产开发管理</span>
          </div>
          <i class="fas fa-chevron-down text-xs transition-transform" id="development-arrow"></i>
        </div>
        <ul id="development-submenu" class="ml-6 mt-2 space-y-1 hidden">
          <li><a href="资产开发管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-cogs"></i> 资产开发管理</a></li>
          <li><a href="资产内容管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-cogs"></i> 资产内容管理</a></li>
        </ul>
      </li>
      
      <!-- 资产会计核算 -->
            <li>
                <a href="资产会计核算.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100">
                    <i class="fas fa-calculator"></i>
                    <span>资产会计核算</span>
                </a>
            </li>
      
      <!-- API管理 -->
      <li>
        <a href="API管理页面.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100">
          <i class="fas fa-plug"></i>
          <span>API管理</span>
        </a>
      </li>
    </ul>
  </aside>
  
  <!-- 展开按钮 -->
  <button id="sidebar-toggle" onclick="toggleSidebar()" class="fixed top-20 left-64 z-40 bg-black bg-opacity-50 backdrop-blur-sm text-white rounded-full p-2 shadow-lg hover:bg-black hover:bg-opacity-70 focus:outline-none transition"><i class="fas fa-chevron-left"></i></button>
  
  <!-- 主体内容区 -->
  <main class="flex-1 w-full py-8 px-8 ml-60">
    <!-- 页面标题 -->
    <div class="content-card p-6 mb-8">
      <div class="flex items-center justify-between mb-4">
        <h1 class="text-2xl font-bold text-gray-800">分类分级管理</h1>
        <div class="flex items-center space-x-4">
          <button onclick="window.location.href='数据资源.html'" class="btn-secondary">
            <i class="fas fa-arrow-left mr-2"></i>返回数据资源
          </button>
        </div>
      </div>
      <p class="text-gray-600">导入Excel文件进行数据分类分级的批量管理</p>
    </div>

    <!-- 文件导入区域 -->
    <div class="content-card p-6 mb-8">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">文件导入</h2>
      <div class="upload-area" id="uploadArea" onclick="document.getElementById('fileInput').click()">
        <div class="flex flex-col items-center">
          <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
          <h3 class="text-lg font-semibold text-gray-700 mb-2">点击或拖拽文件到此处上传</h3>
          <p class="text-gray-500 mb-4">支持 .xlsx, .xls 格式的Excel文件</p>
          <button class="btn-primary">
            <i class="fas fa-file-excel mr-2"></i>选择文件
          </button>
        </div>
        <input type="file" id="fileInput" accept=".xlsx,.xls" style="display: none;" onchange="handleFileUpload(event)">
      </div>
    </div>

    <!-- 预览结果区域 -->
    <div class="content-card p-6" id="previewSection">
      <h2 class="text-xl font-semibold text-gray-800 mb-4">预览结果</h2>
      <div class="mb-4 flex items-center justify-between">
        <span class="text-sm text-gray-500">共 <span id="recordCount">8</span> 条记录</span>
        <div class="flex space-x-2">
          <button class="btn-secondary" onclick="clearPreview()">
            <i class="fas fa-trash mr-2"></i>清空预览
          </button>
          <button class="btn-primary" onclick="confirmImport()">
            <i class="fas fa-check mr-2"></i>确认导入
          </button>
        </div>
      </div>
      
      <div class="overflow-x-auto">
        <table class="preview-table">
          <thead>
            <tr>
              <th class="w-1/4">分类名称</th>
              <th class="w-1/4">英文表名</th>
              <th class="w-1/4">分类</th>
              <th class="w-1/4">分级</th>
            </tr>
          </thead>
          <tbody id="previewTableBody">
            <tr>
              <td>用户基础信息</td>
              <td>user_info</td>
              <td>一级分类/二级分类/三级分类</td>
              <td>核心</td>
            </tr>
            <tr>
              <td>订单交易数据</td>
              <td>order_transaction</td>
              <td>一级分类/二级分类/三级分类</td>
              <td>重要</td>
            </tr>
            <tr>
              <td>系统日志记录</td>
              <td>system_log</td>
              <td>一级分类/二级分类</td>
              <td>一般</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </main>

  <script>
    // 模拟数据
    const mockData = [
      { 分类名称: '用户基础信息', 英文表名: 'user_info', 分类: '个人信息', 分级: '内部' },
      { 分类名称: '订单交易数据', 英文表名: 'order_transaction', 分类: '交易信息', 分级: '机密' },
      { 分类名称: '系统日志记录', 英文表名: 'system_log', 分类: '系统信息', 分级: '内部' },
      { 分类名称: '客户联系方式', 英文表名: 'customer_contact', 分类: '个人信息', 分级: '机密' },
      { 分类名称: '财务统计数据', 英文表名: 'financial_stats', 分类: '财务信息', 分级: '绝密' },
      { 分类名称: '产品目录信息', 英文表名: 'product_catalog', 分类: '产品信息', 分级: '公开' },
      { 分类名称: '员工档案数据', 英文表名: 'employee_records', 分类: '人事信息', 分级: '内部' },
      { 分类名称: '市场调研数据', 英文表名: 'market_research', 分类: '市场信息', 分级: '机密' }
    ];

    // 处理文件上传
    function handleFileUpload(event) {
      const file = event.target.files[0];
      if (file) {
        console.log('选择的文件:', file.name);
        // 模拟文件处理，显示预览数据
        showPreview();
      }
    }

    // 显示预览
    function showPreview() {
      const previewSection = document.getElementById('previewSection');
      const tableBody = document.getElementById('previewTableBody');
      const recordCount = document.getElementById('recordCount');
      
      // 生成表格行
      let tableRows = '';
      mockData.forEach((row, index) => {
        tableRows += `
          <tr>
            <td>${row.分类名称}</td>
            <td>${row.英文表名}</td>
            <td>${row.分类}</td>
            <td>${row.分级}</td>
          </tr>
        `;
      });
      
      tableBody.innerHTML = tableRows;
      recordCount.textContent = mockData.length;
      previewSection.style.display = 'block';
      
      // 滚动到预览区域
      previewSection.scrollIntoView({ behavior: 'smooth' });
    }

    // 清空预览
    function clearPreview() {
      const tableBody = document.getElementById('previewTableBody');
      const recordCount = document.getElementById('recordCount');
      
      tableBody.innerHTML = '';
      recordCount.textContent = '0';
    }

    // 确认导入
    function confirmImport() {
      alert('导入成功！共导入 ' + mockData.length + ' 条记录。');
      // 这里可以添加实际的导入逻辑
    }

    // 拖拽上传功能
    const uploadArea = document.getElementById('uploadArea');
    
    uploadArea.addEventListener('dragover', function(e) {
      e.preventDefault();
      uploadArea.classList.add('dragover');
    });
    
    uploadArea.addEventListener('dragleave', function(e) {
      e.preventDefault();
      uploadArea.classList.remove('dragover');
    });
    
    uploadArea.addEventListener('drop', function(e) {
      e.preventDefault();
      uploadArea.classList.remove('dragover');
      
      const files = e.dataTransfer.files;
      if (files.length > 0) {
        const file = files[0];
        if (file.name.endsWith('.xlsx') || file.name.endsWith('.xls')) {
          console.log('拖拽上传的文件:', file.name);
          showPreview();
        } else {
          alert('请选择Excel文件（.xlsx或.xls格式）');
        }
      }
    });

    // 侧边栏展开/收起
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const mainContent = document.querySelector('main');
      const toggleBtn = document.getElementById('sidebar-toggle');
      const toggleIcon = toggleBtn.querySelector('i');
      
      sidebar.classList.toggle('hidden');
      mainContent.classList.toggle('ml-60');
      
      if (sidebar.classList.contains('hidden')) {
        // 侧边栏收起状态
        toggleBtn.style.left = '0.5rem';
        toggleIcon.className = 'fas fa-bars';
        mainContent.style.marginLeft = '0';
        mainContent.style.maxWidth = '100%';
      } else {
        // 侧边栏展开状态
        toggleBtn.style.left = '16rem';
        toggleIcon.className = 'fas fa-chevron-left';
        mainContent.style.marginLeft = '240px';
        mainContent.style.maxWidth = 'calc(100% - 240px)';
      }
    }
    
    // 子菜单切换
    function toggleSubMenu(menuId) {
      const submenu = document.getElementById(menuId + '-submenu');
      const arrow = document.getElementById(menuId + '-arrow');
      
      if (submenu.classList.contains('hidden')) {
        submenu.classList.remove('hidden');
        arrow.style.transform = 'rotate(180deg)';
      } else {
        submenu.classList.add('hidden');
        arrow.style.transform = 'rotate(0deg)';
      }
    }
    
    // 页面加载完成后的初始化
    document.addEventListener('DOMContentLoaded', function() {
      console.log('分类分级管理页面加载完成');
      
      // 确保主体内容区域初始状态适配侧边栏
      const main = document.querySelector('main');
      main.style.marginLeft = '240px';
      main.style.maxWidth = 'calc(100% - 240px)';
    });
    
    // 用户下拉菜单切换
    function toggleUserDropdown() {
      const dropdownMenu = document.getElementById('user-dropdown-menu');
      const arrow = document.getElementById('dropdown-arrow');
      
      if (dropdownMenu.classList.contains('hidden')) {
        dropdownMenu.classList.remove('hidden');
        arrow.style.transform = 'rotate(180deg)';
      } else {
        dropdownMenu.classList.add('hidden');
        arrow.style.transform = 'rotate(0deg)';
      }
    }
    
    // 点击外部关闭下拉菜单
    document.addEventListener('click', function(event) {
      const dropdown = document.getElementById('user-dropdown');
      const dropdownMenu = document.getElementById('user-dropdown-menu');
      const arrow = document.getElementById('dropdown-arrow');
      
      if (!dropdown.contains(event.target)) {
        dropdownMenu.classList.add('hidden');
        arrow.style.transform = 'rotate(0deg)';
      }
    });
  </script>
</body>
</html>
