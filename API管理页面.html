<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>API管理 - 数据资产管理系统</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <style>
    body { background: #ffffff; }
    .tree-item { cursor: pointer; transition: background-color 0.2s; }
    .tree-item:hover { background-color: #f3f4f6; }
    .tree-item.active { background-color: #dbeafe; color: #2563eb; }
    .tree-arrow { transition: transform 0.2s; }
    .tree-arrow.rotated { transform: rotate(90deg); }
    .tree-children { display: none; }
    .tree-children.expanded { display: block; }
    .action-btn { padding: 0.25rem; border-radius: 0.25rem; transition: all 0.2s; }
    .action-btn:hover { background-color: #e5e7eb; }
    .action-btn.add:hover { background-color: #dcfce7; color: #166534; }
    .action-btn.up:hover { background-color: #dbeafe; color: #2563eb; }
    .action-btn.down:hover { background-color: #dbeafe; color: #2563eb; }
    .action-btn.delete:hover { background-color: #fef2f2; color: #dc2626; }
    .required::after { content: " *"; color: #dc2626; }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <!-- 顶部主导航栏 -->
  <header class="bg-gradient-to-r from-red-900 via-red-800 to-red-900 shadow flex items-center justify-between px-10 h-16 sticky top-0 z-20">
    <div class="flex items-center space-x-4">
      <div class="h-10 w-10 rounded-full border-2 border-red-400 shadow bg-white flex items-center justify-center">
          <svg class="h-6 w-6 text-red-500" fill="currentColor" viewBox="0 0 20 20">
            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
        </div>
      <span class="text-xl font-bold text-white tracking-wide whitespace-nowrap">数据资产管理系统</span>
    </div>
    <nav class="flex-1 flex items-center justify-center space-x-8">
    </nav>
    <div class="flex items-center space-x-4">
      <a href="首页.html" class="text-red-100 hover:text-red-400 font-medium px-3 py-1 rounded border border-red-400 hover:bg-red-700 transition">
        <i class="fas fa-home mr-2"></i>返回首页
      </a>
      <div class="relative" id="user-dropdown">
        <div class="flex items-center space-x-2 cursor-pointer hover:bg-red-700 px-2 py-1 rounded-lg transition" onclick="toggleUserDropdown()">
          <img src="https://i.pravatar.cc/32?img=3" class="rounded-full w-8 h-8 border-2 border-red-200" alt="用户头像">
          <span class="text-red-100 text-sm">张三</span>
          <i class="fas fa-chevron-down text-xs text-red-300 transition-transform" id="dropdown-arrow"></i>
        </div>
        <div id="user-dropdown-menu" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-gray-200 py-2 hidden z-50">
          <a href="个人中心.html" class="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 transition">
            <i class="fas fa-user-circle mr-3 text-red-500"></i>
            个人中心
          </a>
          <a href="#" class="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 transition">
            <i class="fas fa-cog mr-3 text-red-500"></i>
            系统管理
          </a>
          <div class="border-t border-gray-200 my-1"></div>
          <a href="#" class="flex items-center px-4 py-2 text-red-600 hover:bg-red-50 transition">
            <i class="fas fa-sign-out-alt mr-3"></i>
            退出
          </a>
        </div>
      </div>
    </div>
  </header>

  <!-- 可收起平台导航栏 -->
  <aside id="sidebar" class="fixed top-16 left-0 w-60 z-30 transition-transform duration-300">
    <div class="bg-gradient-to-b from-red-900 to-red-800 border-r border-red-700 shadow-xl">
      <div class="flex items-center justify-between px-4 py-3 border-b border-white border-opacity-20">
        <span class="text-lg font-bold text-red-100">平台导航</span>
      </div>
      <ul class="mt-4 space-y-2 px-4 pb-4">
      <!-- 资源盘点登记 -->
      <li>
        <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 cursor-pointer" onclick="toggleSubMenu('inventory')">
          <div class="flex items-center gap-3">
            <i class="fas fa-clipboard-list"></i>
            <span>资源盘点登记</span>
          </div>
          <i class="fas fa-chevron-down text-xs transition-transform" id="inventory-arrow"></i>
        </div>
        <ul id="inventory-submenu" class="ml-6 mt-2 space-y-1 hidden">
          <li><a href="数据来源管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-database"></i> 数据来源管理</a></li>
          <li><a href="数据资源扫描.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-database"></i> 数据资源扫描</a></li>
          <li><a href="数据资源.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-database"></i> 数据资源盘点</a></li>
          <li><a href="资产属性管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-cogs"></i> 资产属性管理</a></li>
          <li><a href="资产标签管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-tag"></i> 资产标签管理</a></li>
          <li><a href="资产目录管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-sitemap"></i> 资产目录管理</a></li>
          <li><a href="数据分类管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-database"></i> 数据分类管理</a></li>
          <li><a href="数据分级管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-layer-group"></i> 数据分级管理</a></li>
        </ul>
      </li>
      
      <!-- 资产确权与管理 -->
      <li>
        <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 cursor-pointer" onclick="toggleSubMenu('rights')">
          <div class="flex items-center gap-3">
            <i class="fas fa-gavel"></i>
            <span>资产确权与管理</span>
          </div>
          <i class="fas fa-chevron-down text-xs transition-transform" id="rights-arrow"></i>
        </div>
        <ul id="rights-submenu" class="ml-6 mt-2 space-y-1 hidden">
          <li><a href="内部申请记录.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-user-shield"></i> 内部申请记录</a></li>
          <li><a href="授权链路记录.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-link"></i> 授权链路记录</a></li>
          <li><a href="权属转移记录.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-exchange-alt"></i> 权属转移记录</a></li>
          <li><a href="权属证明记录.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-certificate"></i> 权属证明记录</a></li>
        </ul>
      </li>
      
      <!-- 资产开发管理 -->
      <li>
        <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 cursor-pointer" onclick="toggleSubMenu('development')">
          <div class="flex items-center gap-3">
            <i class="fas fa-code"></i>
            <span>资产开发管理</span>
          </div>
          <i class="fas fa-chevron-down text-xs transition-transform" id="development-arrow"></i>
        </div>
        <ul id="development-submenu" class="ml-6 mt-2 space-y-1 hidden">
          <li><a href="资产开发管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-cogs"></i> 资产开发管理</a></li>
          <li><a href="资产内容管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-cogs"></i> 资产内容管理</a></li>
        </ul>
      </li>
      
      <!-- 资产会计核算 -->
            <li>
                <a href="资产会计核算.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100">
                    <i class="fas fa-calculator"></i>
                    <span>资产会计核算</span>
                </a>
            </li>
      
      <!-- API管理 -->
      <li>
        <a href="API管理页面.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 bg-red-700">
          <i class="fas fa-plug"></i>
          <span>API管理</span>
        </a>
      </li>
    </ul>
  </aside>

  <!-- 展开按钮 -->
      <button id="sidebar-toggle" onclick="toggleSidebar()" class="fixed top-20 left-64 z-40 bg-black bg-opacity-50 backdrop-blur-sm text-white rounded-full p-2 shadow-lg hover:bg-black hover:bg-opacity-70 focus:outline-none transition"><i class="fas fa-chevron-left"></i></button>

  <!-- 主内容区域 -->
  <main class="flex-1 ml-60 transition-all duration-300" id="mainContent">
    <div class="p-6">


    <!-- 主要内容区域 -->
    <div class="flex gap-6 h-[calc(100vh-12rem)]">
      <!-- API管理区域 -->
      <div class="flex-1 bg-white rounded-lg shadow-sm border border-gray-200 flex flex-col">
        <div class="p-6 border-b border-gray-200">
          <h2 class="text-lg font-semibold text-gray-900 mb-4">API管理</h2>
          
          <!-- API类型标签页 -->
          <div class="flex space-x-8 border-b border-gray-200">
            <button class="pb-2 px-1 border-b-2 border-blue-600 text-blue-600 font-medium text-sm api-tab" onclick="switchApiTab('external')">外部调用API</button>
            <button class="pb-2 px-1 text-gray-500 hover:text-gray-700 text-sm api-tab" onclick="switchApiTab('internal')">内部API</button>
          </div>
        </div>

        <!-- API分区表格 -->
        <div class="flex-1 overflow-y-auto">
          <!-- 外部调用API -->
          <div id="external-api-content" class="p-6 api-content">
            <h3 class="text-md font-semibold text-gray-900 mb-3">外部调用API</h3>
            <table class="w-full">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">数据API中文名称</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">数据API英文名称</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">调用方</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">API状态</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr class="hover:bg-gray-50">
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">第三方支付回调API</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">EXT_PAYMENT_CALLBACK</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">支付平台</td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">已上架</span>
                  </td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">外部订单查询API</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">EXT_ORDER_QUERY</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">合作方系统</td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">已上架</span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- 内部API -->
          <div id="internal-api-content" class="p-6 api-content hidden">
            <h3 class="text-md font-semibold text-gray-900 mb-3">内部API</h3>
            <table class="w-full">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">数据API中文名称</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">数据API英文名称</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">数据来源</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">API状态</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr class="hover:bg-gray-50">
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">用户信息查询API</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">USER_INFO_QUERY</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">内部数据</td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">已上架</span>
                  </td>
                </tr>
                <tr class="hover:bg-gray-50">
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">订单状态查询API</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">ORDER_STATUS_QUERY</td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">内部数据</td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">待上架</span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </main>

  <script>
    // 侧边栏切换
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const mainContent = document.getElementById('mainContent');
      const toggleBtn = document.getElementById('sidebar-toggle');
      const toggleIcon = toggleBtn.querySelector('i');
      
      sidebar.classList.toggle('hidden');
      mainContent.classList.toggle('ml-60');
      
      if (sidebar.classList.contains('hidden')) {
        // 侧边栏收起状态
        toggleBtn.style.left = '0.5rem';
        toggleIcon.className = 'fas fa-bars';
        mainContent.style.marginLeft = '0';
        mainContent.style.maxWidth = '100%';
      } else {
        // 侧边栏展开状态
        toggleBtn.style.left = '16rem';
        toggleIcon.className = 'fas fa-chevron-left';
        mainContent.style.marginLeft = '240px';
        mainContent.style.maxWidth = 'calc(100% - 240px)';
      }
    }

    // 子菜单切换
    function toggleSubMenu(menuId) {
      const submenu = document.getElementById(menuId + '-submenu');
      const arrow = document.getElementById(menuId + '-arrow');
      
      submenu.classList.toggle('hidden');
      arrow.style.transform = submenu.classList.contains('hidden') ? 'rotate(0deg)' : 'rotate(180deg)';
    }

    // 树形结构展开/折叠
    function toggleTreeItem(element) {
      const arrow = element.querySelector('.tree-arrow');
      const children = element.nextElementSibling;
      
      arrow.classList.toggle('rotated');
      children.classList.toggle('expanded');
    }

    // 选择树形项目
    function selectTreeItem(element, name) {
      // 移除所有活动状态
      document.querySelectorAll('.tree-item').forEach(item => {
        item.classList.remove('active');
      });
      
      // 添加活动状态到当前项目
      element.closest('.tree-item').classList.add('active');
      
      console.log('选择了目录:', name);
      // 这里可以添加根据选择的目录筛选API的逻辑
    }

    // 页面加载时初始化
    document.addEventListener('DOMContentLoaded', function() {
      console.log('API管理页面加载完成');
    });
    
    // API标签页切换
    function switchApiTab(type) {
      // 更新标签按钮样式
      const tabs = document.querySelectorAll('.api-tab');
      tabs.forEach(t => {
        t.classList.remove('border-b-2', 'border-blue-600', 'text-blue-600', 'font-medium');
        t.classList.add('text-gray-500');
      });
      
      // 找到被点击的按钮并添加活动样式
      const clickedTab = event.target;
      clickedTab.classList.remove('text-gray-500');
      clickedTab.classList.add('border-b-2', 'border-blue-600', 'text-blue-600', 'font-medium');
      
      // 切换内容显示
      const contents = document.querySelectorAll('.api-content');
      contents.forEach(c => c.classList.add('hidden'));
      
      const activeContent = document.getElementById(type + '-api-content');
      activeContent.classList.remove('hidden');
    }
    
    // 用户下拉菜单切换
    function toggleUserDropdown() {
      const dropdownMenu = document.getElementById('user-dropdown-menu');
      const arrow = document.getElementById('dropdown-arrow');
      
      if (dropdownMenu.classList.contains('hidden')) {
        dropdownMenu.classList.remove('hidden');
        arrow.style.transform = 'rotate(180deg)';
      } else {
        dropdownMenu.classList.add('hidden');
        arrow.style.transform = 'rotate(0deg)';
      }
    }
    
    // 点击外部关闭下拉菜单
    document.addEventListener('click', function(event) {
      const dropdown = document.getElementById('user-dropdown');
      const dropdownMenu = document.getElementById('user-dropdown-menu');
      const arrow = document.getElementById('dropdown-arrow');
      
      if (!dropdown.contains(event.target)) {
        dropdownMenu.classList.add('hidden');
        arrow.style.transform = 'rotate(0deg)';
      }
    });
    // 简单的操作占位实现
    function viewApi(code) {
      alert('查看 API: ' + code);
    }

    function editApi(code) {
      alert('修改 API: ' + code);
    }

    function publishApi(code) {
      alert('上架 API: ' + code);
    }

    function unpublishApi(code) {
      alert('下架 API: ' + code);
    }
  </script>
</body>
</html> 









