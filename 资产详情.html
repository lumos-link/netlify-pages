<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智能评审大模型 - 资产详情 - 数据资产管理系统</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        body { background: #f6f8fa; }
        .search-card { box-shadow: 0 2px 16px 0 #2563eb22; }
        .btn-blue { background: #2563eb; color: #fff; border-radius: 0.5rem; padding: 0.25rem 1.2rem; font-weight: 600; transition: background 0.2s; white-space: nowrap; font-size: 1rem; }
        .btn-blue:hover { background: #1d4ed8; }
        .btn-outline { border: 1.5px solid #2563eb; color: #2563eb; background: #fff; border-radius: 0.5rem; padding: 0.25rem 1.2rem; font-weight: 600; transition: background 0.2s, color 0.2s; white-space: nowrap; font-size: 1rem; }
        .btn-outline:hover { background: #2563eb; color: #fff; }
        .tree-item { cursor: pointer; transition: background-color 0.2s; }
        .tree-item:hover { background-color: #f3f4f6; }
        .tree-item.active { background-color: #dbeafe; color: #2563eb; }
        .tree-arrow { transition: transform 0.2s; }
        .tree-arrow.rotated { transform: rotate(90deg); }
        .arrow-rotated { transform: rotate(180deg); }
        
        /* 自定义滚动条样式 */
        .scrollbar-thin::-webkit-scrollbar {
            width: 8px;
        }
        
        .scrollbar-thin::-webkit-scrollbar-track {
            background: #f3f4f6;
            border-radius: 4px;
        }
        
        .scrollbar-thin::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 4px;
        }
        
        .scrollbar-thin::-webkit-scrollbar-thumb:hover {
            background: #9ca3af;
        }
        
        /* Firefox 滚动条样式 */
        .scrollbar-thin {
            scrollbar-width: thin;
            scrollbar-color: #d1d5db #f3f4f6;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- 顶部主导航栏 -->
    <header class="bg-gradient-to-r from-red-900 via-red-800 to-red-900 shadow flex items-center justify-between px-10 h-16 sticky top-0 z-20">
        <div class="flex items-center space-x-4">
            <div class="h-10 w-10 rounded-full border-2 border-red-400 shadow bg-white flex items-center justify-center">
          <svg class="h-6 w-6 text-red-500" fill="currentColor" viewBox="0 0 20 20">
            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
        </div>
            <span class="text-xl font-bold text-white tracking-wide whitespace-nowrap">数据资产管理系统</span>
        </div>
        <nav class="flex-1 flex items-center justify-center space-x-8">
        </nav>
        <div class="flex items-center space-x-4">
      <a href="首页.html" class="text-red-100 hover:text-red-400 font-medium px-3 py-1 rounded border border-red-400 hover:bg-red-700 transition">
        <i class="fas fa-home mr-2"></i>返回首页
      </a>
      <div class="relative" id="user-dropdown">
                <div class="flex items-center space-x-2 cursor-pointer hover:bg-red-700 px-2 py-1 rounded-lg transition" onclick="toggleUserDropdown()">
                    <img src="https://i.pravatar.cc/32?img=3" class="rounded-full w-8 h-8 border-2 border-red-200" alt="用户头像">
                    <span class="text-red-100 text-sm">张三</span>
                    <i class="fas fa-chevron-down text-xs text-red-300 transition-transform" id="dropdown-arrow"></i>
                </div>
                <div id="user-dropdown-menu" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-gray-200 py-2 hidden z-50">
                    <a href="个人中心.html" class="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 transition">
                        <i class="fas fa-user-circle mr-3 text-red-500"></i>
                        个人中心
                    </a>
                    <a href="#" class="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 transition">
                        <i class="fas fa-cog mr-3 text-red-500"></i>
                        系统管理
                    </a>
                    <div class="border-t border-gray-200 my-1"></div>
                    <a href="#" class="flex items-center px-4 py-2 text-red-600 hover:bg-red-50 transition">
                        <i class="fas fa-sign-out-alt mr-3"></i>
                        退出
                    </a>
                </div>
            </div>
        </div>
    </header>
    

    

    
    <!-- 主体内容区 -->
    <main class="flex-1 w-full max-w-7xl mx-auto py-8 px-4">
        <!-- 主要内容区域 -->
        <section class="flex-1">
            <!-- 面包屑导航 -->
            <div class="mb-6">
                <div class="flex items-center justify-end mb-4">
                    <button onclick="window.history.back()" class="btn-outline flex items-center gap-2 mr-3">
                        <i class="fas fa-arrow-left"></i>
                        返回
                    </button>
                </div>
                <h1 class="text-2xl font-bold text-gray-800 mb-2">采购数据专题分析模型</h1>
                <p class="text-gray-600">所属目录: 业务数据 > 内部数据</p>
            </div>

            <!-- 主要内容区域 -->
            <div class="flex gap-6">
                <!-- 详情内容 -->
                <div class="flex-1">
                    <div class="bg-white rounded-xl shadow-sm border border-gray-200">
                        <!-- 基础信息 -->
                        <div id="basic-info" class="p-6 border-b border-gray-200">
                            <div class="mb-4">
                                <h2 class="text-lg font-semibold text-gray-900">基础信息</h2>
                            </div>
                            <div class="grid grid-cols-2 gap-6">
                                <div class="space-y-3">
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">资产名称:</span>
                                        <span class="text-sm font-medium text-gray-900">采购数据专题分析模型</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">资产类型:</span>
                                        <span class="text-sm text-gray-900">结构化数据</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">持有目的:</span>
                                        <span class="text-sm text-gray-900">运营使用</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">所属部门:</span>
                                        <span class="text-sm text-gray-900">数据资产管理部</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">业务归属:</span>
                                        <span class="text-sm text-gray-900">采购业务</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">所属行业:</span>
                                        <span class="text-sm text-gray-900">能源行业</span>
                                    </div>
                                </div>
                                <div class="space-y-3">
                                    <div class="flex justify-between items-start">
                                        <span class="text-sm text-gray-600">标签:</span>
                                        <div id="asset-tags" data-track="标签" class="flex gap-1 flex-wrap justify-end max-w-xs">
                                            <span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">用户分析</span>
                                            <span class="inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded">产品优化</span>
                                        </div>
                                    </div>
                                    <div class="flex justify-between items-start">
                                        <span class="text-sm text-gray-600">属性:</span>
                                        <div class="flex flex-wrap gap-1 justify-end max-w-xs">
                                            <span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">内部数据</span>
                                            <span class="inline-block bg-red-100 text-red-800 text-xs px-2 py-1 rounded">机密数据</span>
                                        </div>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">分类分级:</span>
                                        <div class="flex gap-2">
                                            <span id="asset-category" data-track="分类" class="inline-block bg-teal-100 text-teal-800 text-xs px-2 py-1 rounded">订单数据</span>
                                            <span id="asset-level" data-track="分级" class="inline-block bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded">P2级</span>
                                        </div>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">创建时间:</span>
                                        <span class="text-sm text-gray-500">2023-06-15</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-sm text-gray-600">更新时间:</span>
                                        <span id="asset-updated-at" data-track="更新时间" class="text-sm text-gray-500">2024-01-15 15:30:45</span>
                                    </div>
                                </div>
                            </div>
                            <div class="mt-4">
                                <span class="text-sm text-gray-600">详细描述:</span>
                                <p id="asset-description" data-track="描述" class="text-sm text-gray-700 mt-1">记录商城订单从创建到完成的完整生命周期数据，包括订单状态变更、支付流程、物流跟踪、售后服务等，用于订单流程优化和用户体验提升。</p>
                            </div>
                        </div>

                        <!-- 数据集详情 -->
                        <div id="dataset-details" class="p-6 border-b border-gray-200">
                            <h2 class="text-lg font-semibold text-gray-900 mb-4">数据集详情</h2>
                            <div class="space-y-4">
                                <!-- 数据集1 -->
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <div class="flex items-center justify-between mb-3">
                                        <h3 class="text-md font-medium text-gray-900 cursor-pointer hover:text-blue-600 transition-colors" onclick="showDatasetDetails('order_lifecycle')">订单生命周期数据集</h3>
                                        <span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">3张表</span>
                                    </div>
                                    <div class="grid grid-cols-3 gap-4 text-sm">
                                        <div class="bg-white rounded p-3 cursor-pointer hover:bg-gray-50 transition-colors" onclick="showTableDetails('user_behavior_log', '采购数据专题分析模型表')">
                                            <div class="font-medium text-gray-900 mb-1">采购数据专题分析模型表</div>
                                            <div class="text-gray-500 text-xs">user_behavior_log</div>
                                            <div class="text-blue-600 text-xs mt-1">8个字段</div>
                                        </div>
                                        <div class="bg-white rounded p-3">
                                            <div class="font-medium text-gray-900 mb-1">订单状态变更表</div>
                                            <div class="text-gray-500 text-xs">order_status_change</div>
                                            <div class="text-blue-600 text-xs mt-1">6个字段</div>
                                        </div>
                                        <div class="bg-white rounded p-3">
                                            <div class="font-medium text-gray-900 mb-1">支付流程记录表</div>
                                            <div class="text-gray-500 text-xs">payment_process</div>
                                            <div class="text-blue-600 text-xs mt-1">5个字段</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 数据集2 -->
                                <div class="bg-gray-50 rounded-lg p-4">
                                    <div class="flex items-center justify-between mb-3">
                                        <h3 class="text-md font-medium text-gray-900">订单分析数据集</h3>
                                        <span class="inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded">3张表</span>
                                    </div>
                                    <div class="grid grid-cols-3 gap-4 text-sm">
                                        <div class="bg-white rounded p-3">
                                            <div class="font-medium text-gray-900 mb-1">订单基础信息表</div>
                                            <div class="text-gray-500 text-xs">order_basic_info</div>
                                            <div class="text-blue-600 text-xs mt-1">12个字段</div>
                                        </div>
                                        <div class="bg-white rounded p-3">
                                            <div class="font-medium text-gray-900 mb-1">订单分析指标表</div>
                                            <div class="text-gray-500 text-xs">order_analysis_metrics</div>
                                            <div class="text-blue-600 text-xs mt-1">7个字段</div>
                                        </div>
                                        <div class="bg-white rounded p-3">
                                            <div class="font-medium text-gray-900 mb-1">订单统计汇总表</div>
                                            <div class="text-gray-500 text-xs">order_summary_stats</div>
                                            <div class="text-blue-600 text-xs mt-1">9个字段</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 血缘关系 -->
                        <div id="table-relationships" class="p-6 border-b border-gray-200">
                            <h2 class="text-lg font-semibold text-gray-900 mb-6">血缘关系</h2>
                            
                            <!-- 血缘关系图 - 左右排布 -->
                            <div class="flex items-center justify-between space-x-8 relative">
                                <!-- 连接线 -->
                                <div class="absolute inset-0 flex items-center justify-between pointer-events-none">
                                    <div class="flex-1 h-px bg-gray-300 mx-4"></div>
                                    <div class="flex-1 h-px bg-gray-300 mx-4"></div>
                                </div>
                                
                                <!-- 上游：来源系统 -->
                                <div class="flex-1 relative">
                                    <h5 class="text-sm font-medium text-gray-900 mb-4 flex items-center">
                                        <i class="fas fa-arrow-right text-blue-500 mr-2"></i>
                                        来源系统
                                    </h5>
                                    <div class="space-y-3">
                                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 relative">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-blue-500 rounded-full mr-3"></div>
                                                <div>
                                                    <div class="text-sm font-medium text-gray-900">智慧管理系统</div>
                                                    <div class="text-xs text-gray-500 font-mono">smart_mgmt_sys</div>
                                                </div>
                                            </div>
                                            <!-- 连接点 -->
                                            <div class="absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-1/2 w-2 h-2 bg-blue-500 rounded-full"></div>
                                        </div>
                                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 relative">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-blue-500 rounded-full mr-3"></div>
                                                <div>
                                                    <div class="text-sm font-medium text-gray-900">国能e购平台</div>
                                                    <div class="text-xs text-gray-500 font-mono">gn_egou_platform</div>
                                                </div>
                                            </div>
                                            <!-- 连接点 -->
                                            <div class="absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-1/2 w-2 h-2 bg-blue-500 rounded-full"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 当前表 -->
                                <div class="flex-shrink-0 relative">
                                    <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg p-4 shadow-lg">
                                        <div class="text-center">
                                            <i class="fas fa-database mb-2"></i>
                                            <div class="text-sm font-medium">采购数据专题分析模型</div>
                                            <div class="text-xs opacity-75 font-mono">user_behavior_log</div>
                                        </div>
                                    </div>
                                    <!-- 连接点 -->
                                    <div class="absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1/2 w-2 h-2 bg-purple-500 rounded-full"></div>
                                    <div class="absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-1/2 w-2 h-2 bg-purple-500 rounded-full"></div>
                                </div>

                                <!-- 下游：被授权方 -->
                                <div class="flex-1 relative">
                                    <h5 class="text-sm font-medium text-gray-900 mb-4 flex items-center justify-end">
                                        <i class="fas fa-arrow-left text-green-500 mr-2"></i>
                                        被授权方
                                    </h5>
                                    <div class="space-y-3">
                                        <div class="bg-green-50 border border-green-200 rounded-lg p-4 relative">
                                            <div class="flex items-center justify-end">
                                                <div>
                                                    <div class="text-sm font-medium text-gray-900">产品分析团队</div>
                                                    <div class="text-xs text-gray-500 font-mono">team_product_analytics</div>
                                                </div>
                                                <div class="w-3 h-3 bg-green-500 rounded-full ml-3"></div>
                                            </div>
                                            <!-- 连接点 -->
                                            <div class="absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1/2 w-2 h-2 bg-green-500 rounded-full"></div>
                                        </div>
                                        <div class="bg-green-50 border border-green-200 rounded-lg p-4 relative">
                                            <div class="flex items-center justify-end">
                                                <div>
                                                    <div class="text-sm font-medium text-gray-900">用户研究团队</div>
                                                    <div class="text-xs text-gray-500 font-mono">team_user_research</div>
                                                </div>
                                                <div class="w-3 h-3 bg-green-500 rounded-full ml-3"></div>
                                            </div>
                                            <!-- 连接点 -->
                                            <div class="absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1/2 w-2 h-2 bg-green-500 rounded-full"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 属性信息 -->
                        <div id="attribute-info" class="p-4 border-b border-gray-200">
                            <h2 class="text-lg font-semibold text-gray-900 mb-3">属性信息</h2>
                            <div class="flex flex-wrap gap-2">
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800 border border-blue-200">
                                    <i class="fas fa-building mr-1.5"></i>
                                    内部数据
                                </span>
                                <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800 border border-red-200">
                                    <i class="fas fa-lock mr-1.5"></i>
                                    机密数据
                                </span>
                            </div>
                        </div>

                        <!-- 标签信息 -->
                        <div id="tag-info" class="p-4 border-b border-gray-200">
                            <h2 class="text-lg font-semibold text-gray-900 mb-3">标签信息</h2>
                            <div class="space-y-3">
                                <div>
                                    <h3 class="text-sm font-medium text-gray-900 mb-1">业务标签</h3>
                                    <div class="flex flex-wrap gap-2">
                                        <span class="inline-block bg-blue-100 text-blue-800 text-xs px-3 py-1 rounded-full">用户分析</span>
                                        <span class="inline-block bg-green-100 text-green-800 text-xs px-3 py-1 rounded-full">产品优化</span>
                                        <span class="inline-block bg-purple-100 text-purple-800 text-xs px-3 py-1 rounded-full">行为追踪</span>
                                        <span class="inline-block bg-orange-100 text-orange-800 text-xs px-3 py-1 rounded-full">用户体验</span>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-sm font-medium text-gray-900 mb-1">技术标签</h3>
                                    <div class="flex flex-wrap gap-2">
                                        <span class="inline-block bg-gray-100 text-gray-800 text-xs px-3 py-1 rounded-full">结构化数据</span>
                                        <span class="inline-block bg-red-100 text-red-800 text-xs px-3 py-1 rounded-full">实时处理</span>
                                        <span class="inline-block bg-yellow-100 text-yellow-800 text-xs px-3 py-1 rounded-full">大数据</span>
                                    </div>
                                </div>
                                <div>
                                    <h3 class="text-sm font-medium text-gray-900 mb-1">安全标签</h3>
                                    <div class="flex flex-wrap gap-2">
                                        <span class="inline-block bg-red-100 text-red-800 text-xs px-3 py-1 rounded-full">P2级</span>
                                        <span class="inline-block bg-orange-100 text-orange-800 text-xs px-3 py-1 rounded-full">内部使用</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 权属信息 -->
                        <div id="ownership-info" class="p-4 border-b border-gray-200">
                            <h2 class="text-lg font-semibold text-gray-900 mb-3">权属信息</h2>
                            <div class="space-y-3">
                                <!-- 数据资源持有权 -->
                                <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center">
                                                <i class="fas fa-database text-white"></i>
                                            </div>
                                            <div>
                                                <h3 class="text-sm font-semibold text-gray-900">数据资源持有权</h3>
                                                <p class="text-xs text-gray-600 mt-1">权限所属：<span class="font-medium text-gray-900">产品运营部</span></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 数据加工使用权 -->
                                <div class="bg-green-50 rounded-lg p-4 border border-green-200">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center">
                                                <i class="fas fa-cogs text-white"></i>
                                            </div>
                                            <div>
                                                <h3 class="text-sm font-semibold text-gray-900">数据加工使用权</h3>
                                                <p class="text-xs text-gray-600 mt-1">权限所属：<span class="font-medium text-gray-900">数据分析团队</span></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 数据产品经营权 -->
                                <div class="bg-purple-50 rounded-lg p-4 border border-purple-200">
                                    <div class="flex items-center justify-between">
                                        <div class="flex items-center gap-3">
                                            <div class="w-10 h-10 bg-purple-600 rounded-lg flex items-center justify-center">
                                                <i class="fas fa-chart-line text-white"></i>
                                            </div>
                                            <div>
                                                <h3 class="text-sm font-semibold text-gray-900">数据产品经营权</h3>
                                                <p class="text-xs text-gray-600 mt-1">权限所属：<span class="font-medium text-gray-900">数据资产部</span></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 授权链路信息 -->
                        <div id="authorization-info" class="p-4 border-b border-gray-200">
                            <h2 class="text-lg font-semibold text-gray-900 mb-3">授权链路记录</h2>
                            <div class="space-y-3">
                                <!-- 授权记录1 -->
                                <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                    <div class="flex items-center justify-between mb-4">
                                        <h3 class="text-md font-medium text-gray-900">加工使用权授权链路</h3>
                                        <span class="inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded font-medium">有效</span>
                                    </div>
                                    
                                    <!-- 授权流程展示 -->
                                    <div class="flex items-center gap-4 mb-3">
                                        <div class="flex-1 bg-blue-100 rounded-lg p-3 border border-blue-300">
                                            <div class="text-xs text-gray-600 mb-1">权属授出方</div>
                                            <div class="text-sm font-semibold text-gray-900">产品运营部</div>
                                            <div class="text-xs text-blue-600 mt-1">所有权人</div>
                                        </div>
                                        
                                        <div class="flex flex-col items-center">
                                            <i class="fas fa-arrow-right text-2xl text-blue-600"></i>
                                            <span class="text-xs text-gray-500 mt-1">授权</span>
                                        </div>
                                        
                                        <div class="flex-1 bg-green-100 rounded-lg p-3 border border-green-300">
                                            <div class="text-xs text-gray-600 mb-1">权属接收方</div>
                                            <div class="text-sm font-semibold text-gray-900">产品分析团队</div>
                                            <div class="text-xs text-green-600 mt-1">使用权人</div>
                                        </div>
                                    </div>
                                    
                                    <div class="grid grid-cols-2 gap-4 text-sm mt-3">
                                        <div>
                                            <span class="text-gray-600">授权时间:</span>
                                            <span class="text-gray-900">2023-09-01</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-600">授权期限:</span>
                                            <span class="text-gray-900">长期有效</span>
                                        </div>
                                    </div>
                                    <div class="mt-2 text-sm">
                                        <span class="text-gray-600">授权范围:</span>
                                        <span class="text-gray-700">仅限产品优化分析使用，不得用于其他商业用途</span>
                                    </div>
                                </div>
                                
                                <!-- 授权记录2 -->
                                <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                    <div class="flex items-center justify-between mb-4">
                                        <h3 class="text-md font-medium text-gray-900">数据资源持有权授权链路</h3>
                                        <span class="inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded font-medium">有效</span>
                                    </div>
                                    
                                    <!-- 授权流程展示 -->
                                    <div class="flex items-center gap-4 mb-3">
                                        <div class="flex-1 bg-blue-100 rounded-lg p-3 border border-blue-300">
                                            <div class="text-xs text-gray-600 mb-1">权属授出方</div>
                                            <div class="text-sm font-semibold text-gray-900">产品运营部</div>
                                            <div class="text-xs text-blue-600 mt-1">所有权人</div>
                                        </div>
                                        
                                        <div class="flex flex-col items-center">
                                            <i class="fas fa-arrow-right text-2xl text-purple-600"></i>
                                            <span class="text-xs text-gray-500 mt-1">委托</span>
                                        </div>
                                        
                                        <div class="flex-1 bg-purple-100 rounded-lg p-3 border border-purple-300">
                                            <div class="text-xs text-gray-600 mb-1">权属接收方</div>
                                            <div class="text-sm font-semibold text-gray-900">数据资产部</div>
                                            <div class="text-xs text-purple-600 mt-1">管理权人</div>
                                        </div>
                                    </div>
                                    
                                    <div class="grid grid-cols-2 gap-4 text-sm mt-3">
                                        <div>
                                            <span class="text-gray-600">授权时间:</span>
                                            <span class="text-gray-900">2023-08-15</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-600">授权期限:</span>
                                            <span class="text-gray-900">永久委托</span>
                                        </div>
                                    </div>
                                    <div class="mt-2 text-sm">
                                        <span class="text-gray-600">授权范围:</span>
                                        <span class="text-gray-700">负责数据资产的日常管理、维护、审批和监督</span>
                                    </div>
                                </div>

                                <!-- 授权记录3 -->
                                <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                    <div class="flex items-center justify-between mb-4">
                                        <h3 class="text-md font-medium text-gray-900">数据产品经营权授权链路</h3>
                                        <span class="inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded font-medium">有效</span>
                                    </div>
                                    
                                    <!-- 授权流程展示 -->
                                    <div class="flex items-center gap-4 mb-3">
                                        <div class="flex-1 bg-green-100 rounded-lg p-3 border border-green-300">
                                            <div class="text-xs text-gray-600 mb-1">权属授出方</div>
                                            <div class="text-sm font-semibold text-gray-900">产品分析团队</div>
                                            <div class="text-xs text-green-600 mt-1">使用权人</div>
                                        </div>
                                        
                                        <div class="flex flex-col items-center">
                                            <i class="fas fa-arrow-right text-2xl text-orange-600"></i>
                                            <span class="text-xs text-gray-500 mt-1">分享</span>
                                        </div>
                                        
                                        <div class="flex-1 bg-orange-100 rounded-lg p-3 border border-orange-300">
                                            <div class="text-xs text-gray-600 mb-1">权属接收方</div>
                                            <div class="text-sm font-semibold text-gray-900">用户研究团队</div>
                                            <div class="text-xs text-orange-600 mt-1">临时使用权</div>
                                        </div>
                                    </div>
                                    
                                    <div class="grid grid-cols-2 gap-4 text-sm mt-3">
                                        <div>
                                            <span class="text-gray-600">授权时间:</span>
                                            <span class="text-gray-900">2023-09-15</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-600">授权期限:</span>
                                            <span class="text-gray-900">2024-09-15到期</span>
                                        </div>
                                    </div>
                                    <div class="mt-2 text-sm">
                                        <span class="text-gray-600">授权范围:</span>
                                        <span class="text-gray-700">用户行为模式研究，需脱敏处理</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 权属证明 -->
                        <div id="protocol-info" class="p-4 border-b border-gray-200">
                            <h2 class="text-lg font-semibold text-gray-900 mb-3">权属证明</h2>
                            <div class="space-y-2">
                                <!-- 证明文件1 -->
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors">
                                    <div class="flex items-center gap-3">
                                        <i class="fas fa-file-pdf text-red-600 text-xl"></i>
                                        <span class="text-sm font-medium text-gray-900">数据资产确权证书.pdf</span>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <a href="#" class="text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1">
                                            <i class="fas fa-eye"></i>
                                            预览
                                        </a>
                                        <a href="#" class="text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1">
                                            <i class="fas fa-download"></i>
                                            下载
                                        </a>
                                    </div>
                                </div>

                                <!-- 证明文件2 -->
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors">
                                    <div class="flex items-center gap-3">
                                        <i class="fas fa-file-pdf text-red-600 text-xl"></i>
                                        <span class="text-sm font-medium text-gray-900">数据合规性审核报告.pdf</span>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <a href="#" class="text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1">
                                            <i class="fas fa-eye"></i>
                                            预览
                                        </a>
                                        <a href="#" class="text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1">
                                            <i class="fas fa-download"></i>
                                            下载
                                        </a>
                                    </div>
                                </div>

                                <!-- 证明文件3 -->
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors">
                                    <div class="flex items-center gap-3">
                                        <i class="fas fa-file-pdf text-red-600 text-xl"></i>
                                        <span class="text-sm font-medium text-gray-900">数据资源采集授权书.pdf</span>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <a href="#" class="text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1">
                                            <i class="fas fa-eye"></i>
                                            预览
                                        </a>
                                        <a href="#" class="text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1">
                                            <i class="fas fa-download"></i>
                                            下载
                                        </a>
                                    </div>
                                </div>

                                <!-- 证明文件4 -->
                                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors">
                                    <div class="flex items-center gap-3">
                                        <i class="fas fa-file-pdf text-red-600 text-xl"></i>
                                        <span class="text-sm font-medium text-gray-900">数据安全评估报告.pdf</span>
                                    </div>
                                    <div class="flex items-center gap-3">
                                        <a href="#" class="text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1">
                                            <i class="fas fa-eye"></i>
                                            预览
                                        </a>
                                        <a href="#" class="text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1">
                                            <i class="fas fa-download"></i>
                                            下载
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 历史版本 -->
                        <div id="version-history" class="p-4 border-t border-gray-200">
                            <h2 class="text-lg font-semibold text-gray-900 mb-3">历史版本</h2>
                            <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                <div class="flex items-center justify-between mb-3">
                                    <div class="text-sm text-gray-600">点击“保存修改”后将生成版本记录。</div>
                                </div>
                                <ul id="version-list" class="divide-y divide-gray-200"></ul>
                                <div id="no-version" class="text-sm text-gray-500 text-center py-6">暂无版本记录</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 右侧导航 -->
                <div class="w-64">
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200 sticky top-6">
                        <div class="p-4 border-b border-gray-200">
                            <h4 class="text-sm font-medium text-gray-900">页面导航</h4>
                        </div>
                        <nav class="p-4 space-y-2">
                            <a href="#basic-info" class="flex items-center px-3 py-2 text-sm text-red-600 bg-red-50 rounded-lg">
                                <i class="fas fa-info-circle mr-2"></i>
                                基础信息
                            </a>
                            <a href="#dataset-details" class="flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg">
                                <i class="fas fa-database mr-2"></i>
                                数据集详情
                            </a>
                            <a href="#table-relationships" class="flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg">
                                <i class="fas fa-project-diagram mr-2"></i>
                                血缘关系
                            </a>
                            <a href="#attribute-info" class="flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg">
                                <i class="fas fa-cogs mr-2"></i>
                                属性信息
                            </a>
                            <a href="#tag-info" class="flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg">
                                <i class="fas fa-tags mr-2"></i>
                                标签信息
                            </a>
                            <a href="#ownership-info" class="flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg">
                                <i class="fas fa-user-shield mr-2"></i>
                                权属信息
                            </a>
                            <a href="#authorization-info" class="flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg">
                                <i class="fas fa-link mr-2"></i>
                                授权链路信息
                            </a>
                            <a href="#protocol-info" class="flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg">
                                <i class="fas fa-file-contract mr-2"></i>
                                权属证明
                            </a>
                            <a href="#version-history" class="flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-lg">
                                <i class="fas fa-history mr-2"></i>
                                历史版本
                            </a>
                        </nav>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- 数据集详情弹窗 -->
    <div id="dataset-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-5xl w-full max-h-[90vh] flex flex-col">
            <!-- 弹窗头部 -->
            <div class="flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0">
                <div>
                    <h3 class="text-xl font-bold text-gray-900" id="modal-dataset-name">数据集详情</h3>
                    <p class="text-sm text-gray-500 mt-1" id="modal-dataset-type"></p>
                </div>
                <button onclick="closeDatasetModal()" class="text-gray-400 hover:text-gray-600 transition-colors">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <!-- 弹窗内容 -->
            <div class="flex-1 overflow-y-auto p-6" style="max-height: calc(90vh - 120px);">

                <!-- 数据表列表 -->
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-900 mb-4">包含数据表</h4>
                    <div class="flex gap-4" id="dataset-tables-grid">
                        <!-- 数据表卡片将通过JavaScript动态填充 -->
                    </div>
                </div>

                <!-- 数据集基本信息 -->
                <div class="mb-6">
                    <div class="bg-white rounded-lg border border-gray-200 p-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">名称 <span class="text-red-500">*</span></label>
                                <input type="text" id="dataset-name" class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50" placeholder="请输入数据集名称" readonly>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">数据库类型 <span class="text-red-500">*</span></label>
                                <select id="database-type" class="w-full px-3 py-2 border border-gray-300 rounded-lg" disabled>
                                    <option value="">请选择数据库类型</option>
                                    <option value="RDS">RDS</option>
                                    <option value="MySQL">MySQL</option>
                                    <option value="Oracle">Oracle</option>
                                    <option value="PostgreSQL">PostgreSQL</option>
                                </select>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4 mt-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">数据结构 <span class="text-red-500">*</span></label>
                                <select id="data-structure" class="w-full px-3 py-2 border border-gray-300 rounded-lg" disabled>
                                    <option value="">请选择数据结构</option>
                                    <option value="结构化数据">结构化数据</option>
                                    <option value="半结构化数据">半结构化数据</option>
                                    <option value="非结构化数据">非结构化数据</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">规模 <span class="text-red-500">*</span></label>
                                <input type="text" id="data-scale" class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50" placeholder="如：100GB" readonly>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4 mt-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">条数 <span class="text-red-500">*</span></label>
                                <input type="text" id="total-records" class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50" placeholder="如：100万条" readonly>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">频率 <span class="text-red-500">*</span></label>
                                <select id="update-frequency" class="w-full px-3 py-2 border border-gray-300 rounded-lg" disabled>
                                    <option value="">请选择更新频率</option>
                                    <option value="实时">实时</option>
                                    <option value="每日">每日</option>
                                    <option value="每周">每周</option>
                                    <option value="每月">每月</option>
                                </select>
                            </div>
                        </div>
                        <div class="grid grid-cols-2 gap-4 mt-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">加工性质 <span class="text-red-500">*</span></label>
                                <select id="processing-nature" class="w-full px-3 py-2 border border-gray-300 rounded-lg" disabled>
                                    <option value="">请选择加工性质</option>
                                    <option value="原始数据">原始数据</option>
                                    <option value="加工数据">加工数据</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">数据来源 <span class="text-red-500">*</span></label>
                                <input type="text" id="data-source" class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50" placeholder="请输入数据来源" readonly>
                            </div>
                        </div>
                        <div class="mt-4">
                            <label class="block text-sm font-medium text-gray-700 mb-2">详细描述</label>
                            <textarea id="dataset-description" class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50" rows="3" placeholder="请描述数据集的内容和用途" readonly></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 版本详情弹窗 -->
    <div id="version-view-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[85vh] flex flex-col">
            <div class="flex items-center justify-between p-5 border-b border-gray-200">
                <div>
                    <h3 class="text-lg font-bold text-gray-900">查看版本详情</h3>
                    <p class="text-xs text-gray-500 mt-1" id="version-view-meta"></p>
                </div>
                <button id="version-view-close" class="text-gray-400 hover:text-gray-600"><i class="fas fa-times text-xl"></i></button>
            </div>
            <div class="flex-1 overflow-y-auto p-5">
                <div class="flex items-center justify-between mb-3">
                    <div class="text-sm text-gray-700">完整变更列表</div>
                    <button id="copy-version-changes" class="text-xs px-2 py-1 border rounded hover:bg-gray-50">复制变更</button>
                </div>
                <div id="version-view-list" class="space-y-2"></div>
            </div>
        </div>
    </div>

    <!-- 表详情弹窗 -->
    <div id="table-modal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl max-w-7xl w-full max-h-[90vh] flex flex-col">
            <!-- 弹窗头部 -->
            <div class="flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0">
                <div>
                    <h3 class="text-xl font-bold text-gray-900" id="modal-table-name">表详情</h3>
                    <p class="text-sm text-gray-500 mt-1" id="modal-table-code"></p>
                </div>
                <button onclick="closeTableModal()" class="text-gray-400 hover:text-gray-600 transition-colors">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <!-- 弹窗内容 -->
            <div class="flex-1 overflow-y-auto p-6" style="max-height: calc(90vh - 120px);">
                <!-- 表结构信息 -->
                <div class="overflow-x-auto">
                    <table class="min-w-full border border-gray-200 rounded-lg text-sm">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">字段名</th>
                                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">字段描述（字段英文名）</th>
                                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">字段类型</th>
                                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">字段长度</th>
                                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">顺序</th>
                                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">是否是主键</th>
                                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">是否非空</th>
                                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">来源系统分类</th>
                                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">来源系统分级</th>
                                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">自定义分类</th>
                                <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">自定义分级</th>
                            </tr>
                        </thead>
                        <tbody id="table-structure-body" class="bg-white divide-y divide-gray-200">
                            <!-- 表结构数据将通过JavaScript动态填充 -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>

        // 平滑滚动到锚点
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // 表详情弹窗相关函数
        function showTableDetails(tableCode, tableName) {
            // 设置弹窗标题
            document.getElementById('modal-table-name').textContent = tableName;
            document.getElementById('modal-table-code').textContent = tableCode;
            
            // 填充表结构数据
            fillTableStructure(tableCode);
            
            // 显示弹窗
            document.getElementById('table-modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeTableModal() {
            document.getElementById('table-modal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function fillTableStructure(tableCode) {
            const structureBody = document.getElementById('table-structure-body');
            
            // 根据表名填充不同的表结构
            if (tableCode === 'user_behavior_log') {
                const structure = [
                    { name: '规则名称', englishName: 'name', type: 'varchar', length: '120', order: '1', isPrimaryKey: '否', isNotNull: '是', sourceCategory: '基础数据', sourceLevel: 'P2级', customCategory: '订单数据', customLevel: 'P2级' },
                    { name: '组件类型', englishName: 'code', type: 'varchar', length: '60', order: '2', isPrimaryKey: '否', isNotNull: '是', sourceCategory: '基础数据', sourceLevel: 'P2级', customCategory: '订单数据', customLevel: 'P2级' },
                    { name: '规则类别', englishName: 'can_modify', type: 'tinyint', length: '1', order: '3', isPrimaryKey: '否', isNotNull: '是', sourceCategory: '基础数据', sourceLevel: 'P2级', customCategory: '订单数据', customLevel: 'P2级' },
                    { name: '规则编号', englishName: 'element_attr_code', type: 'varchar', length: '120', order: '4', isPrimaryKey: '是', isNotNull: '是', sourceCategory: '基础数据', sourceLevel: 'P2级', customCategory: '订单数据', customLevel: 'P2级' },
                    { name: '文件类型', englishName: 'file_type', type: 'varchar', length: '120', order: '5', isPrimaryKey: '否', isNotNull: '否', sourceCategory: '基础数据', sourceLevel: 'P2级', customCategory: '订单数据', customLevel: 'P2级' },
                    { name: '模型名称', englishName: 'model_name', type: 'varchar', length: '120', order: '6', isPrimaryKey: '否', isNotNull: '否', sourceCategory: '基础数据', sourceLevel: 'P2级', customCategory: '订单数据', customLevel: 'P2级' },
                    { name: '表达式执行', englishName: 'expression_exec', type: 'text', length: '-', order: '7', isPrimaryKey: '否', isNotNull: '否', sourceCategory: '基础数据', sourceLevel: 'P3级', customCategory: '订单数据', customLevel: 'P3级' },
                    { name: '表达式明细', englishName: 'expression_detail', type: 'varchar', length: '500', order: '8', isPrimaryKey: '否', isNotNull: '否', sourceCategory: '基础数据', sourceLevel: 'P3级', customCategory: '订单数据', customLevel: 'P3级' },
                    { name: '描述', englishName: 'description', type: 'varchar', length: '255', order: '9', isPrimaryKey: '否', isNotNull: '否', sourceCategory: '基础数据', sourceLevel: 'P2级', customCategory: '订单数据', customLevel: 'P2级' },
                    { name: '规则要求', englishName: 'demand', type: 'varchar', length: '100', order: '10', isPrimaryKey: '否', isNotNull: '否', sourceCategory: '基础数据', sourceLevel: 'P2级', customCategory: '订单数据', customLevel: 'P2级' },
                    { name: '规则类型', englishName: 'type', type: 'tinyint', length: '4', order: '11', isPrimaryKey: '否', isNotNull: '是', sourceCategory: '基础数据', sourceLevel: 'P2级', customCategory: '订单数据', customLevel: 'P2级' }
                ];
                
                structureBody.innerHTML = structure.map(field => `
                    <tr class="hover:bg-gray-50">
                        <td class="px-3 py-3 text-sm text-gray-900 font-medium">${field.name}</td>
                        <td class="px-3 py-3 text-sm text-gray-600">${field.englishName}</td>
                        <td class="px-3 py-3 text-sm text-gray-600">${field.type}</td>
                        <td class="px-3 py-3 text-sm text-gray-600">${field.length}</td>
                        <td class="px-3 py-3 text-sm text-gray-600 text-center">${field.order}</td>
                        <td class="px-3 py-3 text-sm text-center">
                            <span class="inline-block px-2 py-1 text-xs rounded ${field.isPrimaryKey === '是' ? 'bg-red-100 text-red-800' : 'bg-gray-100 text-gray-600'}">${field.isPrimaryKey}</span>
                        </td>
                        <td class="px-3 py-3 text-sm text-center">
                            <span class="inline-block px-2 py-1 text-xs rounded ${field.isNotNull === '是' ? 'bg-blue-100 text-blue-800' : 'bg-gray-100 text-gray-600'}">${field.isNotNull}</span>
                        </td>
                        <td class="px-3 py-3 text-sm text-gray-600">${field.sourceCategory}</td>
                        <td class="px-3 py-3 text-sm text-gray-600">${field.sourceLevel}</td>
                        <td class="px-3 py-3 text-sm text-gray-600">${field.customCategory}</td>
                        <td class="px-3 py-3 text-sm text-gray-600">${field.customLevel}</td>
                    </tr>
                `).join('');
            }
        }

        function fillTableStats(tableCode) {
            // 模拟统计数据
            if (tableCode === 'user_behavior_log') {
                document.getElementById('total-rows').textContent = '1,234,567';
                document.getElementById('total-size').textContent = '2.3 GB';
                document.getElementById('last-update').textContent = '2024-01-15 15:30:45';
            }
        }

        function fillTablePreview(tableCode) {
            const previewHeader = document.getElementById('preview-header');
            const previewBody = document.getElementById('preview-body');
            
            if (tableCode === 'user_behavior_log') {
                // 设置预览表头
                previewHeader.innerHTML = `
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">ID</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">用户ID</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">页面URL</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">事件类型</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">时间戳</th>
                `;
                
                // 设置预览数据
                const previewData = [
                    { id: '1001', userId: 'U001', pageUrl: '/home', eventType: 'page_view', timestamp: '2024-01-15 15:30:45' },
                    { id: '1002', userId: 'U001', pageUrl: '/products', eventType: 'click', timestamp: '2024-01-15 15:31:12' },
                    { id: '1003', userId: 'U002', pageUrl: '/cart', eventType: 'page_view', timestamp: '2024-01-15 15:32:00' },
                    { id: '1004', userId: 'U002', pageUrl: '/checkout', eventType: 'form_submit', timestamp: '2024-01-15 15:33:25' },
                    { id: '1005', userId: 'U003', pageUrl: '/search', eventType: 'search', timestamp: '2024-01-15 15:34:10' }
                ];
                
                previewBody.innerHTML = previewData.map(row => `
                    <tr>
                        <td class="px-4 py-3 text-sm text-gray-900">${row.id}</td>
                        <td class="px-4 py-3 text-sm text-gray-600">${row.userId}</td>
                        <td class="px-4 py-3 text-sm text-gray-600">${row.pageUrl}</td>
                        <td class="px-4 py-3 text-sm text-gray-600">${row.eventType}</td>
                        <td class="px-4 py-3 text-sm text-gray-600">${row.timestamp}</td>
                    </tr>
                `).join('');
            }
        }

        // 数据集详情弹窗相关函数
        function showDatasetDetails(datasetCode) {
            // 设置弹窗标题
            document.getElementById('modal-dataset-name').textContent = '订单生命周期数据集详情';
            document.getElementById('modal-dataset-type').textContent = '业务数据集';
            
            // 填充数据集基本信息
            fillDatasetInfo(datasetCode);
            
            // 填充数据表列表
            fillDatasetTables(datasetCode);
            
            // 显示弹窗
            document.getElementById('dataset-modal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeDatasetModal() {
            document.getElementById('dataset-modal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function fillDatasetInfo(datasetCode) {
            if (datasetCode === 'order_lifecycle') {
                // 填充数据集基本信息表单
                document.getElementById('dataset-name').value = '订单生命周期数据集';
                
                // 设置数据库类型下拉框
                const databaseTypeSelect = document.getElementById('database-type');
                databaseTypeSelect.value = 'RDS';
                
                // 设置数据结构下拉框
                const dataStructureSelect = document.getElementById('data-structure');
                dataStructureSelect.value = '结构化数据';
                
                document.getElementById('data-scale').value = '6,594 MB';
                document.getElementById('total-records').value = '3,654,177 条';
                
                // 设置更新频率下拉框
                const updateFrequencySelect = document.getElementById('update-frequency');
                updateFrequencySelect.value = '每日';
                
                // 设置加工性质下拉框
                const processingNatureSelect = document.getElementById('processing-nature');
                processingNatureSelect.value = '加工数据';
                
                document.getElementById('data-source').value = '国能e购+数据填报';
                document.getElementById('dataset-description').value = '展现商城订单全生命周期效率，洞察订单全流程运转情况、精准定位问题环节。围绕订单全生命周期平均时长和完成率两个核心指标，进行达标趋势分析和增长趋势分析。';
            }
        }

        function fillDatasetTables(datasetCode) {
            const tablesGrid = document.getElementById('dataset-tables-grid');
            
            if (datasetCode === 'order_lifecycle') {
                const tables = [
                    {
                        name: '采购数据专题分析模型表',
                        code: 'user_behavior_log',
                        fields: 8,
                        description: '记录用户行为轨迹和订单相关操作'
                    },
                    {
                        name: '订单状态变更表',
                        code: 'order_status_change',
                        fields: 6,
                        description: '记录订单状态变更历史和时间点'
                    },
                    {
                        name: '支付流程记录表',
                        code: 'payment_process',
                        fields: 5,
                        description: '记录支付流程的各个环节和状态'
                    },
                    {
                        name: '用户行为分析表',
                        code: 'user_behavior_analysis',
                        fields: 12,
                        description: '分析用户购买行为和偏好特征'
                    },
                    {
                        name: '商品库存管理表',
                        code: 'product_inventory',
                        fields: 10,
                        description: '管理商品库存和补货策略'
                    },
                    {
                        name: '物流配送跟踪表',
                        code: 'logistics_tracking',
                        fields: 15,
                        description: '跟踪物流配送状态和时效'
                    },
                    {
                        name: '客户服务记录表',
                        code: 'customer_service',
                        fields: 8,
                        description: '记录客户咨询和问题处理'
                    },
                    {
                        name: '营销活动效果表',
                        code: 'marketing_effect',
                        fields: 9,
                        description: '分析营销活动效果和转化率'
                    },
                    {
                        name: '财务结算汇总表',
                        code: 'financial_settlement',
                        fields: 11,
                        description: '汇总财务结算和资金流向'
                    }
                ];
                
                // 添加调试信息
                console.log('Tables count:', tables.length);
                console.log('Tables:', tables);
                
                // 只显示前3个数据表
                const tablesToShow = tables.slice(0, 3);
                tablesGrid.innerHTML = tablesToShow.map(table => `
                    <div class="bg-white rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow cursor-pointer flex-1" onclick="showTableDetails('${table.code}', '${table.name}')">
                        <div class="flex items-center justify-between mb-3">
                            <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-table text-blue-600"></i>
                            </div>
                            <span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">${table.fields}个字段</span>
                        </div>
                        <h5 class="font-semibold text-gray-800 mb-1">${table.name}</h5>
                        <p class="text-sm text-gray-500 mb-2">${table.code}</p>
                        <p class="text-xs text-gray-600">${table.description}</p>
                    </div>
                `).join('');
                
                // 验证实际渲染的表数量
                const renderedTables = tablesGrid.querySelectorAll('.bg-white.rounded-lg');
                console.log('Rendered tables count:', renderedTables.length);
                

            }
        }

        // 点击弹窗外部关闭弹窗
        document.getElementById('table-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeTableModal();
            }
        });

        // 点击数据集弹窗外部关闭弹窗
        document.getElementById('dataset-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeDatasetModal();
            }
        });

        // 页面加载时展开当前页面对应的菜单
        document.addEventListener('DOMContentLoaded', function() {
            initVersioning();
        });
        
        // 用户下拉菜单切换
        function toggleUserDropdown() {
            const dropdownMenu = document.getElementById('user-dropdown-menu');
            const arrow = document.getElementById('dropdown-arrow');
            
            if (dropdownMenu.classList.contains('hidden')) {
                dropdownMenu.classList.remove('hidden');
                arrow.style.transform = 'rotate(180deg)';
            } else {
                dropdownMenu.classList.add('hidden');
                arrow.style.transform = 'rotate(0deg)';
            }
        }
        
        // 点击外部关闭下拉菜单
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('user-dropdown');
            const dropdownMenu = document.getElementById('user-dropdown-menu');
            const arrow = document.getElementById('dropdown-arrow');
            
            if (!dropdown.contains(event.target)) {
                dropdownMenu.classList.add('hidden');
                arrow.style.transform = 'rotate(0deg)';
            }
        });
    </script>
    <script>
        // 历史版本管理（基于 localStorage 的前端原型实现）
        function initVersioning() {
            const titleEl = document.querySelector('h1');
            const assetId = (titleEl ? titleEl.textContent.trim() : 'asset') + ':v1';
            // const saveBtn = document.getElementById('save-asset-changes'); // 已移除按钮
            // const clearBtn = document.getElementById('clear-history'); // 已移除按钮
            const versionList = document.getElementById('version-list');
            const noVersion = document.getElementById('no-version');

            function loadVersions() {
                try { return JSON.parse(localStorage.getItem('versions:' + assetId) || '[]'); } catch { return []; }
            }

            function saveVersions(list) {
                localStorage.setItem('versions:' + assetId, JSON.stringify(list));
            }

            function getSnapshot() {
                const tracked = document.querySelectorAll('[data-track]');
                const snapshot = {};
                tracked.forEach(el => {
                    const key = el.getAttribute('data-track');
                    snapshot[key] = el.textContent.trim();
                });
                return snapshot;
            }

            function diffSnapshots(prev, next) {
                const changes = [];
                const keys = new Set([...(prev ? Object.keys(prev) : []), ...(next ? Object.keys(next) : [])]);
                keys.forEach(k => {
                    const before = prev && prev[k] ? prev[k] : '';
                    const after = next && next[k] ? next[k] : '';
                    if (before !== after) changes.push({ field: k, before, after });
                });
                return changes;
            }

            function renderVersions() {
                const versions = loadVersions();
                versionList.innerHTML = versions.map((v, idx) => {
                    const date = new Date(v.timestamp).toLocaleString();
                    return `
                    <li class="py-3 flex items-start justify-between">
                        <div>
                            <div class="text-sm font-medium text-gray-900">${v.versionNo ? ('版本 ' + v.versionNo + ' · ') : ''}${v.user || '未知用户'} · ${date}</div>
                            <div class="text-xs text-gray-500 mt-1">修改项：${v.changes.length} 项</div>
                            <div class="mt-2 space-y-1">
                                ${v.changes.slice(0, 3).map(c => `<div class=\"text-xs text-gray-600\"><span class=\"font-medium\">${c.field}：</span><span class=\"line-through text-red-500 mr-1\">${c.before || '-'}\</span><span class=\"text-green-600\">${c.after || '-'}\</span></div>`).join('')}
                                ${v.changes.length > 3 ? `<div class=\"text-xs text-gray-400\">… 还有 ${v.changes.length - 3} 项</div>` : ''}
                            </div>
                        </div>
                        
                    </li>`;
                }).join('');
                noVersion.style.display = versions.length ? 'none' : 'block';
            }

            function applySnapshot(snapshot) {
                document.querySelectorAll('[data-track]').forEach(el => {
                    const key = el.getAttribute('data-track');
                    if (snapshot[key] !== undefined) el.textContent = snapshot[key];
                });
            }

            if (!localStorage.getItem('baseline:' + assetId)) {
                localStorage.setItem('baseline:' + assetId, JSON.stringify(getSnapshot()));
            }

            // 若无历史，注入示例版本记录
            (function seedDemoVersionsIfEmpty(){
                const current = loadVersions();
                if (current.length > 0) return;
                const now = Date.now();
                const demo = [
                    {
                        versionNo: 'v1.0.0',
                        timestamp: now - 1000 * 60 * 60 * 24 * 7, // 一周前
                        user: '张三',
                        changes: [
                            { field: '描述', before: '—', after: '首次创建资产并补充基础描述' },
                            { field: '分级', before: '—', after: 'P2级' },
                            { field: '分类', before: '—', after: '订单数据' }
                        ],
                        snapshot: {
                            描述: '首次创建资产并补充基础描述',
                            分级: 'P2级',
                            分类: '订单数据',
                            标签: '用户分析, 产品优化',
                            更新时间: new Date(now - 1000 * 60 * 60 * 24 * 7).toISOString().slice(0,19).replace('T',' '),
                            确权时间: '2023-08-15',
                            权属变更: '无变更记录'
                        }
                    },
                    {
                        versionNo: 'v1.0.1',
                        timestamp: now - 1000 * 60 * 60 * 24 * 3, // 三天前
                        user: '李四',
                        changes: [
                            { field: '描述', before: '首次创建资产并补充基础描述', after: '补充支付流程与物流跟踪说明' },
                            { field: '标签', before: '用户分析, 产品优化', after: '用户分析, 产品优化, 行为追踪' }
                        ],
                        snapshot: {
                            描述: '补充支付流程与物流跟踪说明',
                            分级: 'P2级',
                            分类: '订单数据',
                            标签: '用户分析, 产品优化, 行为追踪',
                            更新时间: new Date(now - 1000 * 60 * 60 * 24 * 3).toISOString().slice(0,19).replace('T',' '),
                            确权时间: '2023-08-15',
                            权属变更: '无变更记录'
                        }
                    },
                    {
                        versionNo: 'v1.1.0',
                        timestamp: now - 1000 * 60 * 60 * 24, // 一天前
                        user: '王五',
                        changes: [
                            { field: '分级', before: 'P2级', after: 'P3级' },
                            { field: '分类', before: '订单数据', after: '订单与支付数据' },
                            { field: '权属变更', before: '无变更记录', after: '增加共享给产品分析团队' }
                        ],
                        snapshot: {
                            描述: '补充支付流程与物流跟踪说明',
                            分级: 'P3级',
                            分类: '订单与支付数据',
                            标签: '用户分析, 产品优化, 行为追踪',
                            更新时间: new Date(now - 1000 * 60 * 60 * 24).toISOString().slice(0,19).replace('T',' '),
                            确权时间: '2023-08-15',
                            权属变更: '增加共享给产品分析团队'
                        }
                    }
                ];
                saveVersions(demo);
            })();

            // 已移除“保存修改”按钮与版本生成逻辑

            // 已移除“清空历史”按钮与逻辑

            // 版本详情模态关闭、外部点击与复制
            (function bindVersionViewModal(){
                const modal = document.getElementById('version-view-modal');
                const closeBtn = document.getElementById('version-view-close');
                closeBtn && closeBtn.addEventListener('click', () => modal.classList.add('hidden'));
                modal.addEventListener('click', (e) => { if (e.target === modal) modal.classList.add('hidden'); });
                const copyBtn = document.getElementById('copy-version-changes');
                copyBtn && copyBtn.addEventListener('click', () => {
                    const meta = document.getElementById('version-view-meta').textContent;
                    const items = Array.from(document.getElementById('version-view-list').children).map(el => el.textContent.trim()).join('\n');
                    const text = meta + '\n' + items;
                    if (navigator.clipboard && navigator.clipboard.writeText) {
                        navigator.clipboard.writeText(text).then(() => alert('已复制到剪贴板')).catch(() => alert('复制失败，请手动复制'));
                    } else {
                        alert('复制失败，请手动复制');
                    }
                });
            })();

            renderVersions();
        }
    </script>
</body>
</html> 










