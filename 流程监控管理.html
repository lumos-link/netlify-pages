<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>流程监控管理 - 数据资产管理平台</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { 
      background: #ffffff;
      min-height: 100vh;
      position: relative;
    }
    .content-card { 
      background: rgba(255, 255, 255, 0.95); 
      backdrop-filter: blur(10px);
      border-radius: 1rem; 
      box-shadow: 0 4px 20px rgba(37, 99, 235, 0.15);
    }
    
    /* 响应式布局优化 */
    @media (max-width: 1024px) {
      .main-content {
        flex-direction: column;
      }
      .sidebar-left {
        width: 100%;
        margin-bottom: 1rem;
      }
      .content-right {
        width: 100%;
      }
    }
    
    @media (max-width: 768px) {
      .grid-cols-5 {
        grid-template-columns: repeat(2, 1fr);
      }
      .grid-cols-4 {
        grid-template-columns: repeat(2, 1fr);
      }
      .sticky {
        position: static;
      }
      .w-80 {
        width: 100%;
      }
    }
    
    /* 确保表格内容不会溢出 */
    .table-auto {
      table-layout: auto;
    }
    
    /* 优化滚动条样式 */
    .overflow-x-auto::-webkit-scrollbar {
      height: 8px;
    }
    
    .overflow-x-auto::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 4px;
    }
    
    .overflow-x-auto::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 4px;
    }
    
    .overflow-x-auto::-webkit-scrollbar-thumb:hover {
      background: #a8a8a8;
    }
    .btn-primary {
      background: #2563eb;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      font-weight: 600;
      transition: all 0.2s;
    }
    .btn-primary:hover {
      background: #1d4ed8;
    }
    .btn-secondary {
      background: white;
      color: #2563eb;
      border: 1px solid #2563eb;
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      font-weight: 600;
      transition: all 0.2s;
    }
    .btn-secondary:hover {
      background: #2563eb;
      color: white;
    }
    .tab-item {
      cursor: pointer;
      transition: all 0.2s;
      border-bottom: 2px solid transparent;
    }
    .tab-item.active {
      border-bottom-color: #2563eb;
      color: #2563eb;
      font-weight: 600;
    }
    .tree-item {
      cursor: pointer;
      transition: all 0.2s;
    }
    .tree-item:hover {
      background: rgba(59, 130, 246, 0.1);
    }
    .tree-item.active {
      background: rgba(59, 130, 246, 0.2);
      color: #2563eb;
      font-weight: 600;
    }
    
    .status-badge {
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
    }
    .status-research { background-color: #FEF3C7; color: #92400E; }
    .status-proposal { background-color: #DBEAFE; color: #1E40AF; }
    .status-decision { background-color: #FCE7F3; color: #BE185D; }
    .status-requirement { background-color: #D1FAE5; color: #065F46; }
    .status-development { background-color: #FED7AA; color: #C2410C; }
    .status-testing { background-color: #E0E7FF; color: #3730A3; }
    .status-acceptance { background-color: #FEF3C7; color: #92400E; }
    .status-online { background-color: #D1FAE5; color: #065F46; }
    .status-completed { background-color: #D1FAE5; color: #065F46; }
    .status-paused { background-color: #FEE2E2; color: #991B1B; }
    
    .timeline-item {
      position: relative;
      padding-left: 2rem;
    }
    .timeline-item::before {
      content: '';
      position: absolute;
      left: 0.5rem;
      top: 0.5rem;
      width: 0.75rem;
      height: 0.75rem;
      border-radius: 50%;
      background-color: #3B82F6;
    }
    .timeline-item::after {
      content: '';
      position: absolute;
      left: 0.875rem;
      top: 1.25rem;
      width: 2px;
      height: calc(100% - 0.75rem);
      background-color: #E5E7EB;
    }
    .timeline-item:last-child::after {
      display: none;
    }
    
    .progress-bar {
      background-color: #E5E7EB;
      border-radius: 0.5rem;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #3B82F6, #1D4ED8);
      transition: width 0.3s ease;
    }



    /* 流程监督模块样式 */
    .monitoring-card {
      transition: all 0.3s ease;
    }
    .monitoring-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }
    
    .progress-bar {
      transition: width 0.5s ease;
    }
    
    .alert-item {
      animation: slideIn 0.3s ease;
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    .chart-container {
      position: relative;
      height: 300px;
    }
    
    .resource-bar {
      transition: width 0.8s ease;
    }
    
    .pulse-animation {
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% {
        opacity: 1;
      }
      50% {
        opacity: 0.7;
      }
      100% {
        opacity: 1;
      }
    }
    
    .status-active {
      background: #dbeafe;
      color: #1d4ed8;
    }
    .status-pending {
      background: #fef3c7;
      color: #d97706;
    }
    .status-completed {
      background: #d1fae5;
      color: #059669;
    }
    .status-error {
      background: #fee2e2;
      color: #dc2626;
    }



    /* 文件上传区域样式 */
    .upload-area {
      position: relative;
    }

    .upload-area .border-dashed {
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .upload-area .border-dashed:hover {
      border-color: #667eea;
      background: rgba(102, 126, 234, 0.05);
    }

    .upload-area.dragover .border-dashed {
      border-color: #667eea;
      background: rgba(102, 126, 234, 0.1);
    }

    .uploaded-file {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 12px;
      background: #f9fafb;
      border: 1px solid #e5e7eb;
      border-radius: 6px;
      margin-bottom: 8px;
    }

    .uploaded-file .file-info {
      display: flex;
      align-items: center;
    }

    .uploaded-file .file-icon {
      margin-right: 8px;
      color: #6b7280;
    }

    .uploaded-file .file-name {
      font-size: 14px;
      color: #374151;
      margin-right: 8px;
    }

    .uploaded-file .file-size {
      font-size: 12px;
      color: #6b7280;
    }

    .uploaded-file .remove-file {
      color: #ef4444;
      cursor: pointer;
      padding: 4px;
      border-radius: 4px;
      transition: all 0.2s ease;
    }

    .uploaded-file .remove-file:hover {
      background: #fee2e2;
    }
    
    .status-active { @apply bg-green-100 text-green-800; }
    .status-pending { @apply bg-yellow-100 text-yellow-800; }
    .status-completed { @apply bg-blue-100 text-blue-800; }
    .status-failed { @apply bg-red-100 text-red-800; }
    .priority-high { @apply bg-red-100 text-red-800; }
    .priority-medium { @apply bg-yellow-100 text-yellow-800; }
    .priority-low { @apply bg-green-100 text-green-800; }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <!-- 顶部主导航栏 -->
  <header class="bg-gradient-to-r from-red-900 via-red-800 to-red-900 shadow flex items-center justify-between px-10 h-16 sticky top-0 z-20">
    <div class="flex items-center space-x-4">
      <img src="https://img1.imgtp.com/2023/07/21/0Qw6Qk4n.png" alt="LOGO" class="h-10 w-10 rounded-full border-2 border-red-400 shadow bg-white object-contain">
      <span class="text-xl font-bold text-white tracking-wide whitespace-nowrap">数据资产管理平台</span>
    </div>
    <nav class="flex-1 flex items-center justify-center space-x-8">
      <a href="首页.html" class="text-red-100 hover:text-red-400 font-medium">首页</a>
      <a href="数据资产.html" class="text-red-100 hover:text-red-400 font-medium">资产运营管理</a>
      <a href="数据来源管理.html" class="text-red-100 hover:text-red-400 font-medium">资源盘点登记</a>
      <a href="权属信息管理.html" class="text-red-100 hover:text-red-400 font-medium">资产确权与管理</a>
      <a href="资产开发管理.html" class="text-red-100 hover:text-red-400 font-medium bg-red-700 px-3 py-1 rounded">资产开发管理</a>
      <a href="#" class="text-red-100 hover:text-red-400 font-medium">资产会计核算</a>
      <a href="API目录管理.html" class="text-red-100 hover:text-red-400 font-medium">API管理</a>
    </nav>
    <div class="flex items-center space-x-4">
      <div class="relative" id="user-dropdown">
        <div class="flex items-center space-x-2 cursor-pointer hover:bg-red-700 px-2 py-1 rounded-lg transition" onclick="toggleUserDropdown()">
          <img src="https://i.pravatar.cc/32?img=3" class="rounded-full w-8 h-8 border-2 border-red-200" alt="用户头像">
          <span class="text-red-100 text-sm">张三</span>
          <i class="fas fa-chevron-down text-xs text-red-300 transition-transform" id="dropdown-arrow"></i>
        </div>
        <div id="user-dropdown-menu" class="absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-xl border border-gray-200 py-2 hidden z-50">
          <a href="#" class="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 transition">
            <i class="fas fa-user-circle mr-3 text-red-500"></i>
            个人中心
          </a>
          <a href="#" class="flex items-center px-4 py-2 text-gray-700 hover:bg-gray-100 transition">
            <i class="fas fa-cog mr-3 text-red-500"></i>
            系统管理
          </a>
          <div class="border-t border-gray-200 my-1"></div>
          <a href="#" class="flex items-center px-4 py-2 text-red-600 hover:bg-red-50 transition">
            <i class="fas fa-sign-out-alt mr-3"></i>
            退出
          </a>
        </div>
      </div>
    </div>
  </header>
  
  <!-- 可收起平台导航栏 -->
  <aside id="sidebar" class="fixed top-16 left-0 min-h-[calc(100vh-4rem)] w-60 bg-gradient-to-b from-red-900 to-red-800 border-r border-red-700 shadow-xl z-30 transition-transform duration-300">
    <div class="flex items-center justify-between px-4 py-3 border-b border-white border-opacity-20">
      <span class="text-lg font-bold text-red-100">平台导航</span>
    </div>
    <ul class="mt-4 space-y-2 px-4">
      <!-- 首页 -->
      <li><a href="首页.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100"><i class="fas fa-home"></i> 首页</a></li>
      
      <!-- 资产运营管理 -->
      <li>
        <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 cursor-pointer" onclick="toggleSubMenu('operation')">
          <div class="flex items-center gap-3">
            <i class="fas fa-chart-line"></i>
            <span>资产运营管理</span>
          </div>
          <i class="fas fa-chevron-down text-xs transition-transform" id="operation-arrow"></i>
        </div>
        <ul id="operation-submenu" class="ml-6 mt-2 space-y-1 hidden">
          <li><a href="数据资产.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-database"></i> 数据资产</a></li>
          <li><a href="数据看板.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-chart-bar"></i> 数据看板</a></li>
        </ul>
      </li>
      
      <!-- 资源盘点登记 -->
      <li>
        <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 cursor-pointer" onclick="toggleSubMenu('inventory')">
          <div class="flex items-center gap-3">
            <i class="fas fa-clipboard-list"></i>
            <span>资源盘点登记</span>
          </div>
          <i class="fas fa-chevron-down text-xs transition-transform" id="inventory-arrow"></i>
        </div>
        <ul id="inventory-submenu" class="ml-6 mt-2 space-y-1 hidden">
          <li><a href="数据来源管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-database"></i> 数据来源管理</a></li>
          <li><a href="数据资源扫描.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-database"></i> 数据资源扫描</a></li>
          <li><a href="数据资源.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-database"></i> 数据资源盘点</a></li>
          <li><a href="资产属性管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-cogs"></i> 资产属性管理</a></li>
          <li><a href="资产标签管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-tag"></i> 资产标签管理</a></li>
          <li><a href="资产目录管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-sitemap"></i> 资产目录管理</a></li>
          <li><a href="数据分类管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-database"></i> 数据分类管理</a></li>
        </ul>
      </li>
      
      <!-- 资产确权与管理 -->
      <li>
        <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 cursor-pointer" onclick="toggleSubMenu('rights')">
          <div class="flex items-center gap-3">
            <i class="fas fa-gavel"></i>
            <span>资产确权与管理</span>
          </div>
          <i class="fas fa-chevron-down text-xs transition-transform" id="rights-arrow"></i>
        </div>
        <ul id="rights-submenu" class="ml-6 mt-2 space-y-1 hidden">
          <li><a href="权属信息管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-user-shield"></i> 权属信息管理</a></li>
          <li><a href="授权链路管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-link"></i> 授权链路管理</a></li>

          
          <li><a href="协议管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-cogs"></i> 协议管理</a></li>
        </ul>
      </li>
      
      <!-- 资产开发管理 -->
      <li>
        <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 cursor-pointer bg-red-700" onclick="toggleSubMenu('development')">
          <div class="flex items-center gap-3">
            <i class="fas fa-code"></i>
            <span>资产开发管理</span>
          </div>
          <i class="fas fa-chevron-down text-xs transition-transform" id="development-arrow" style="transform: rotate(180deg);"></i>
        </div>
        <ul id="development-submenu" class="ml-6 mt-2 space-y-1">
          <li><a href="资产开发管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-cogs"></i> 资产开发管理</a></li>
          <li><a href="流程监控管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm bg-red-700"><i class="fas fa-cogs"></i> 流程监控管理</a></li>
          <li><a href="资产内容管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-cogs"></i> 资产内容管理</a></li>
        </ul>
      </li>
      
      <!-- 资产会计核算 -->
      <li>
        <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 cursor-pointer" onclick="toggleSubMenu('accounting')">
          <div class="flex items-center gap-3">
            <i class="fas fa-calculator"></i>
            <span>资产会计核算</span>
          </div>
          <i class="fas fa-chevron-down text-xs transition-transform" id="accounting-arrow"></i>
        </div>
        <ul id="accounting-submenu" class="ml-6 mt-2 space-y-1 hidden">
          <li><a href="资产会计计量.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-calculator"></i> 资产会计计量</a></li>
          <li><a href="资产披露.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-file-alt"></i> 资产披露</a></li>
          <li><a href="资产应用.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-chart-bar"></i> 资产应用</a></li>
        </ul>
      </li>
      
      <!-- API管理 -->
      <li>
        <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 cursor-pointer" onclick="toggleSubMenu('api')">
          <div class="flex items-center gap-3">
            <i class="fas fa-plug"></i>
            <span>API管理</span>
          </div>
          <i class="fas fa-chevron-down text-xs transition-transform" id="api-arrow"></i>
        </div>
        <ul id="api-submenu" class="ml-6 mt-2 space-y-1 hidden">
          <li><a href="API目录管理.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-sitemap"></i> API目录管理</a></li>
          <li><a href="API管理页面.html" class="flex items-center gap-3 px-3 py-2 rounded-lg hover:bg-red-700 text-red-100 text-sm"><i class="fas fa-cogs"></i> API管理</a></li>
        </ul>
      </li>
    </ul>
  </aside>
  
  <!-- 展开按钮 -->
  <button id="sidebar-toggle" onclick="toggleSidebar()" class="fixed top-20 left-64 z-40 bg-black bg-opacity-50 backdrop-blur-sm text-white rounded-full p-2 shadow-lg hover:bg-black hover:bg-opacity-70 focus:outline-none transition"><i class="fas fa-chevron-left"></i></button>
  
    <!-- 主体内容区 -->
  <main class="flex-1 w-full max-w-7xl mx-auto py-8 px-4 ml-60">


    <!-- 统计卡片 -->
    <div class="content-card p-6 mb-6">
      <h3 class="text-lg font-bold text-gray-800 mb-4">流程监控统计</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        <div class="text-center p-4 bg-blue-50 rounded-lg">
          <div class="text-3xl font-bold text-blue-600">24</div>
          <div class="text-sm text-gray-600">运行中流程</div>
        </div>
        <div class="text-center p-4 bg-green-50 rounded-lg">
          <div class="text-3xl font-bold text-green-600">156</div>
          <div class="text-sm text-gray-600">已完成流程</div>
        </div>
        <div class="text-center p-4 bg-yellow-50 rounded-lg">
          <div class="text-3xl font-bold text-yellow-600">8</div>
          <div class="text-sm text-gray-600">待处理预警</div>
        </div>
        <div class="text-center p-4 bg-red-50 rounded-lg">
          <div class="text-3xl font-bold text-red-600">3</div>
          <div class="text-sm text-gray-600">异常流程</div>
        </div>
      </div>
    </div>

            <!-- 功能模块标签页 -->
        <div class="content-card">
          <div class="border-b border-gray-200">
            <nav class="flex space-x-8 px-6" aria-label="Tabs">
              <button onclick="switchTab('management')" id="tab-management" class="tab-button active py-4 px-1 border-b-2 border-blue-500 font-medium text-sm text-blue-600">
                <i class="fas fa-cogs mr-2"></i>流程管理
              </button>
              <button onclick="switchTab('records')" id="tab-records" class="tab-button py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700">
                <i class="fas fa-history mr-2"></i>流程记录
              </button>
              <button onclick="switchTab('monitoring')" id="tab-monitoring" class="tab-button py-4 px-1 border-b-2 border-transparent font-medium text-sm text-gray-500 hover:text-gray-700">
                <i class="fas fa-eye mr-2"></i>流程监督
              </button>
            </nav>
          </div>

        <!-- 流程管理模块 -->
        <div id="management-content" class="tab-content active p-6">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-lg font-medium text-gray-900">流程建模与配置</h3>
            </div>

            <!-- 流程列表 -->
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">流程名称</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">流程类型</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">创建时间</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <tr data-process-id="process-001">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center">
                                    <i class="fas fa-project-diagram text-blue-600 mr-3"></i>
                                    <div>
                                        <div class="text-sm font-medium text-gray-900">数据质量检查流程</div>
                                        <div class="text-sm text-gray-500">质量检查流程</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">质量检查流程</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="status-active px-2 inline-flex text-xs leading-5 font-semibold rounded-full">运行中</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024-01-15</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <button onclick="editProcess('process-001')" class="text-blue-600 hover:text-blue-900 mr-3">编辑</button>
                                <button onclick="viewProcess('process-001')" class="text-green-600 hover:text-green-900 mr-3">查看</button>
                                <button onclick="deleteProcess('process-001')" class="text-red-600 hover:text-red-900">删除</button>
                            </td>
                        </tr>
                        <tr data-process-id="process-002">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center">
                                    <i class="fas fa-shield-alt text-green-600 mr-3"></i>
                                    <div>
                                        <div class="text-sm font-medium text-gray-900">安全审批流程</div>
                                        <div class="text-sm text-gray-500">安全审批流程</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">安全流程</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="status-active px-2 inline-flex text-xs leading-5 font-semibold rounded-full">运行中</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024-01-10</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <button onclick="editProcess('process-002')" class="text-blue-600 hover:text-blue-900 mr-3">编辑</button>
                                <button onclick="viewProcess('process-002')" class="text-green-600 hover:text-green-900 mr-3">查看</button>
                                <button onclick="deleteProcess('process-002')" class="text-red-600 hover:text-red-900">删除</button>
                            </td>
                        </tr>
                        <tr data-process-id="process-003">
                            <td class="px-6 py-4 whitespace-nowrap">
                                <div class="flex items-center">
                                    <i class="fas fa-database text-purple-600 mr-3"></i>
                                    <div>
                                        <div class="text-sm font-medium text-gray-900">数据备份流程</div>
                                        <div class="text-sm text-gray-500">备份流程</div>
                                    </div>
                                </div>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800">自定义流程</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="status-completed px-2 inline-flex text-xs leading-5 font-semibold rounded-full">已完成</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024-01-05</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                <button onclick="editProcess('process-003')" class="text-blue-600 hover:text-blue-900 mr-3">编辑</button>
                                <button onclick="viewProcess('process-003')" class="text-green-600 hover:text-green-900 mr-3">查看</button>
                                <button onclick="deleteProcess('process-003')" class="text-red-600 hover:text-red-900">删除</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- 流程记录模块 -->
        <div id="records-content" class="tab-content hidden p-6">

            <!-- 筛选条件 -->
            <div class="bg-gray-50 rounded-lg p-4 mb-6">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">时间范围</label>
                        <div class="flex space-x-2">
                            <input type="date" class="flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm" id="startDate">
                            <input type="date" class="flex-1 border border-gray-300 rounded-lg px-3 py-2 text-sm" id="endDate">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">操作类型</label>
                        <select id="operationType" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm">
                            <option value="">全部类型</option>
                            <option value="create">创建流程</option>
                            <option value="edit">编辑流程</option>
                            <option value="delete">删除流程</option>
                            <option value="start">启动流程</option>
                            <option value="complete">完成流程</option>
                            <option value="approve">审批操作</option>
                            <option value="reject">拒绝操作</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">流程名称</label>
                        <select id="processName" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm">
                            <option value="">全部流程</option>
                            <option value="数据质量检查流程">数据质量检查流程</option>
                            <option value="安全审批流程">安全审批流程</option>
                            <option value="数据备份流程">数据备份流程</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">操作人</label>
                        <input type="text" id="operator" placeholder="输入操作人姓名" class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm">
                    </div>
                </div>
                <div class="flex justify-end mt-4 space-x-3">
                    <button onclick="resetFilters()" class="btn-secondary">
                        <i class="fas fa-undo mr-2"></i>重置
                    </button>
                    <button onclick="filterRecords()" class="btn-primary">
                        <i class="fas fa-search mr-2"></i>筛选
                    </button>
                </div>
            </div>



            <!-- 记录列表 -->
            <div class="bg-white rounded-lg shadow overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作时间</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作类型</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">流程名称</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作人</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作详情</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white divide-y divide-gray-200" id="recordsTableBody">
                            <!-- 记录行将通过JavaScript动态生成 -->
                        </tbody>
                    </table>
                </div>
                
                <!-- 分页 -->
                <div class="bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6">
                    <div class="flex-1 flex justify-between sm:hidden">
                        <button onclick="previousPage()" class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                            上一页
                        </button>
                        <button onclick="nextPage()" class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50">
                            下一页
                        </button>
                    </div>
                    <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                        <div>
                            <p class="text-sm text-gray-700">
                                显示第 <span class="font-medium" id="startRecord">1</span> 到 <span class="font-medium" id="endRecord">10</span> 条，共 <span class="font-medium" id="totalCount">1,234</span> 条记录
                            </p>
                        </div>
                        <div>
                            <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                                <button onclick="previousPage()" class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button onclick="goToPage(1)" class="page-btn relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">1</button>
                                <button onclick="goToPage(2)" class="page-btn relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">2</button>
                                <button onclick="goToPage(3)" class="page-btn relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">3</button>
                                <span class="relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700">...</span>
                                <button onclick="goToPage(10)" class="page-btn relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50">10</button>
                                <button onclick="nextPage()" class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 流程监督模块 -->
        <div id="monitoring-content" class="tab-content hidden p-6">
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                      <!-- 实时监控图表 -->
                    <div class="content-card p-6">
                     <div class="flex items-center justify-between mb-4">
                         <h3 class="text-lg font-medium text-gray-900">流程执行趋势</h3>
                         <div class="flex space-x-2">
                             <button onclick="updateChartData('day')" class="px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200">今日</button>
                             <button onclick="updateChartData('week')" class="px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200">本周</button>
                             <button onclick="updateChartData('month')" class="px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200">本月</button>
                         </div>
                     </div>
                     <div class="chart-container">
                         <canvas id="processChart" width="400" height="200"></canvas>
                     </div>
                   </div>

                  <!-- 预警信息 -->
                  <div class="content-card p-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">实时预警</h3>
                    <div class="space-y-3">
                      <div class="flex items-center p-3 bg-red-50 border border-red-200 rounded-lg">
                        <i class="fas fa-exclamation-triangle text-red-600 mr-3"></i>
                        <div class="flex-1">
                          <div class="text-sm font-medium text-red-800">数据安全检查超时</div>
                          <div class="text-sm text-red-600">流程ID: PROC-2024-001</div>
                        </div>
                        <button class="text-red-600 hover:text-red-800">
                          <i class="fas fa-times"></i>
                        </button>
                      </div>
                      <div class="flex items-center p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
                        <i class="fas fa-clock text-yellow-600 mr-3"></i>
                        <div class="flex-1">
                          <div class="text-sm font-medium text-yellow-800">审批流程等待时间过长</div>
                          <div class="text-sm text-yellow-600">等待时间: 2小时30分钟</div>
                        </div>
                        <button class="text-yellow-600 hover:text-yellow-800">
                          <i class="fas fa-times"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- 流程状态监控 -->
                <div class="mt-6 content-card p-6">
                  <h3 class="text-lg font-medium text-gray-900 mb-4">流程状态监控</h3>
                  <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="border border-gray-200 rounded-lg p-4">
                      <div class="flex items-center justify-between mb-2">
                        <span class="text-sm font-medium text-gray-700">数据资产审批流程</span>
                        <span class="status-active px-2 text-xs font-semibold rounded-full">运行中</span>
                      </div>
                      <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-blue-600 h-2 rounded-full" style="width: 75%"></div>
                      </div>
                      <div class="text-xs text-gray-500 mt-1">进度: 75% (3/4步骤)</div>
                    </div>
                    <div class="border border-gray-200 rounded-lg p-4">
                      <div class="flex items-center justify-between mb-2">
                        <span class="text-sm font-medium text-gray-700">数据安全检查流程</span>
                        <span class="status-pending px-2 text-xs font-semibold rounded-full">等待中</span>
                      </div>
                      <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-yellow-600 h-2 rounded-full" style="width: 25%"></div>
                      </div>
                      <div class="text-xs text-gray-500 mt-1">进度: 25% (1/4步骤)</div>
                    </div>
                    <div class="border border-gray-200 rounded-lg p-4">
                      <div class="flex items-center justify-between mb-2">
                        <span class="text-sm font-medium text-gray-700">数据质量检查流程</span>
                        <span class="status-completed px-2 text-xs font-semibold rounded-full">已完成</span>
                      </div>
                      <div class="w-full bg-gray-200 rounded-full h-2">
                        <div class="bg-green-600 h-2 rounded-full" style="width: 100%"></div>
                      </div>
                      <div class="text-xs text-gray-500 mt-1">进度: 100% (4/4步骤)</div>
                    </div>
                  </div>
                </div>
        </div>
    </div>
</main>

    <!-- 查看流程详情模态框 -->
    <div id="viewProcessModal" class="fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-5 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-lg font-medium text-gray-900">流程详情</h3>
                    <button onclick="closeViewProcessModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <div class="space-y-6">
                    <!-- 基本信息 -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h4 class="text-md font-medium text-gray-900 mb-3">基本信息</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-600">流程名称</label>
                                <p id="viewProcessName" class="text-sm text-gray-900 mt-1">-</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600">流程类型</label>
                                <p id="viewProcessType" class="text-sm text-gray-900 mt-1">-</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600">优先级</label>
                                <p id="viewProcessPriority" class="text-sm text-gray-900 mt-1">-</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600">超时设置</label>
                                <p id="viewProcessTimeout" class="text-sm text-gray-900 mt-1">-</p>
                            </div>
                            <div class="md:col-span-2">
                                <label class="block text-sm font-medium text-gray-600">流程描述</label>
                                <p id="viewProcessDescription" class="text-sm text-gray-900 mt-1">-</p>
                            </div>
                        </div>
                    </div>

                    <!-- 流程步骤 -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h4 class="text-md font-medium text-gray-900 mb-3">流程步骤</h4>
                        <div id="viewProcessSteps" class="space-y-3">
                            <!-- 步骤将通过JavaScript动态生成 -->
                        </div>
                    </div>

                    <!-- 条件配置 -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h4 class="text-md font-medium text-gray-900 mb-3">条件配置</h4>
                        <div id="viewProcessConditions" class="space-y-3">
                            <!-- 条件将通过JavaScript动态生成 -->
                        </div>
                    </div>

                    <!-- 权限设置 -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h4 class="text-md font-medium text-gray-900 mb-3">权限设置</h4>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-600">发起权限</label>
                                <div id="viewProcessInitiators" class="text-sm text-gray-900 mt-1">-</div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600">查看权限</label>
                                <div id="viewProcessViewers" class="text-sm text-gray-900 mt-1">-</div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600">通知设置</label>
                                <div id="viewProcessNotifications" class="text-sm text-gray-900 mt-1">-</div>
                            </div>
                        </div>
                    </div>

                    <!-- 流程统计 -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h4 class="text-md font-medium text-gray-900 mb-3">流程统计</h4>
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                            <div class="text-center">
                                <div class="text-2xl font-bold text-blue-600" id="viewProcessTotalRuns">0</div>
                                <div class="text-sm text-gray-600">总执行次数</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-green-600" id="viewProcessSuccessRate">0%</div>
                                <div class="text-sm text-gray-600">成功率</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-orange-600" id="viewProcessAvgDuration">0h</div>
                                <div class="text-sm text-gray-600">平均耗时</div>
                            </div>
                            <div class="text-center">
                                <div class="text-2xl font-bold text-red-600" id="viewProcessTimeoutCount">0</div>
                                <div class="text-sm text-gray-600">超时次数</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex justify-end mt-6 pt-4 border-t border-gray-200">
                    <button onclick="closeViewProcessModal()" class="btn-secondary">关闭</button>
                </div>
            </div>
        </div>
    </div>



    <script>
        // 侧边栏切换功能
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.querySelector('main');
            const toggleBtn = document.getElementById('sidebar-toggle');
            const toggleIcon = toggleBtn.querySelector('i');
            
            sidebar.classList.toggle('hidden');
            mainContent.classList.toggle('ml-60');
            
            if (sidebar.classList.contains('hidden')) {
                // 侧边栏收起状态
                toggleBtn.style.left = '0.5rem';
                toggleIcon.className = 'fas fa-bars';
                mainContent.style.marginLeft = '0';
                mainContent.style.maxWidth = '100%';
            } else {
                // 侧边栏展开状态
                toggleBtn.style.left = '16rem';
                toggleIcon.className = 'fas fa-chevron-left';
                mainContent.style.marginLeft = '240px';
                mainContent.style.maxWidth = 'calc(100% - 240px)';
            }
        }

        // 子菜单切换功能
        function toggleSubMenu(menuId) {
            const submenu = document.getElementById(menuId + '-submenu');
            const arrow = document.getElementById(menuId + '-arrow');
            const isOpen = !submenu.classList.contains('hidden');
            
            if (isOpen) {
                submenu.classList.add('hidden');
                arrow.style.transform = 'rotate(0deg)';
            } else {
                submenu.classList.remove('hidden');
                arrow.style.transform = 'rotate(180deg)';
            }
        }

        // 标签页切换
        function switchTab(tabName) {
            // 隐藏所有内容
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
                content.classList.remove('active');
            });
            
            // 重置所有标签按钮样式
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active', 'border-blue-500', 'text-blue-600');
                button.classList.add('border-transparent', 'text-gray-500');
            });
            
            // 显示对应内容
            document.getElementById(tabName + '-content').classList.remove('hidden');
            document.getElementById(tabName + '-content').classList.add('active');
            
            // 激活对应标签按钮
            document.getElementById('tab-' + tabName).classList.add('active', 'border-blue-500', 'text-blue-600');
            document.getElementById('tab-' + tabName).classList.remove('border-transparent', 'text-gray-500');
        }

        // 流程管理相关函数
        // 移除新建流程相关函数，保留编辑和查看功能

        // 模拟流程数据
        const processData = {
            'process-001': {
                name: '数据质量检查流程',
                type: 'quality',
                priority: 'high',
                timeout: 48,
                description: '用于检查数据质量和完整性的标准流程',
                steps: [
                    { stepNumber: 1, name: '数据提交', type: 'submit', assignee: '张三' },
                    { stepNumber: 2, name: '质量检查', type: 'check', assignee: '李四' },
                    { stepNumber: 3, name: '问题修复', type: 'review', assignee: '王五' },
                    { stepNumber: 4, name: '最终审核', type: 'approve', assignee: '赵六' }
                ],
                conditions: [
                    { conditionNumber: 1, field: 'dataQuality', operator: 'greater_than', value: '80', nextStep: 'step3' },
                    { conditionNumber: 2, field: 'dataQuality', operator: 'less_than', value: '80', nextStep: 'step2' }
                ],
                permissions: {
                    initiators: ['数据管理员', '业务分析师'],
                    viewers: ['流程参与者', '部门主管'],
                    notifications: ['邮件通知', '系统消息']
                },
                statistics: {
                    totalRuns: 156,
                    successRate: 94.2,
                    avgDuration: 12.5,
                    timeoutCount: 3
                }
            },
            'process-002': {
                name: '安全审批流程',
                type: 'security',
                priority: 'high',
                timeout: 24,
                description: '处理敏感数据访问的安全审批流程',
                steps: [
                    { stepNumber: 1, name: '申请提交', type: 'submit', assignee: '申请人' },
                    { stepNumber: 2, name: '安全评估', type: 'check', assignee: '安全专家' },
                    { stepNumber: 3, name: '部门审批', type: 'approve', assignee: '部门经理' },
                    { stepNumber: 4, name: '最终批准', type: 'approve', assignee: '安全主管' }
                ],
                conditions: [
                    { conditionNumber: 1, field: 'securityLevel', operator: 'equals', value: 'high', nextStep: 'step4' },
                    { conditionNumber: 2, field: 'securityLevel', operator: 'equals', value: 'medium', nextStep: 'step3' }
                ],
                permissions: {
                    initiators: ['数据管理员'],
                    viewers: ['流程参与者', '安全团队'],
                    notifications: ['邮件通知', '系统消息', '短信通知']
                },
                statistics: {
                    totalRuns: 89,
                    successRate: 98.9,
                    avgDuration: 8.2,
                    timeoutCount: 1
                }
            },
            'process-003': {
                name: '数据备份流程',
                type: 'custom',
                priority: 'medium',
                timeout: 72,
                description: '定期数据备份和恢复测试流程',
                steps: [
                    { stepNumber: 1, name: '备份准备', type: 'submit', assignee: '系统管理员' },
                    { stepNumber: 2, name: '备份执行', type: 'check', assignee: '备份系统' },
                    { stepNumber: 3, name: '备份验证', type: 'check', assignee: '质量检查员' },
                    { stepNumber: 4, name: '恢复测试', type: 'check', assignee: '测试工程师' }
                ],
                conditions: [
                    { conditionNumber: 1, field: 'backupSize', operator: 'greater_than', value: '100GB', nextStep: 'step3' }
                ],
                permissions: {
                    initiators: ['系统管理员'],
                    viewers: ['IT团队', '数据管理员'],
                    notifications: ['邮件通知']
                },
                statistics: {
                    totalRuns: 45,
                    successRate: 100.0,
                    avgDuration: 36.8,
                    timeoutCount: 0
                }
            }
        };

        function editProcess(id) {
            // 获取流程数据
            const process = processData[id];
            if (!process) {
                alert('流程数据不存在！');
                return;
            }

            // 这里可以添加编辑流程的逻辑
            alert('编辑流程功能：' + process.name);
        }

        function viewProcess(id) {
            // 获取流程数据
            const process = processData[id];
            if (!process) {
                alert('流程数据不存在！');
                return;
            }

            // 填充查看模态框数据
            fillViewProcessModal(process);
            
            // 显示模态框
            document.getElementById('viewProcessModal').classList.remove('hidden');
        }

        function closeViewProcessModal() {
            document.getElementById('viewProcessModal').classList.add('hidden');
        }

        function fillViewProcessModal(process) {
            // 填充基本信息
            document.getElementById('viewProcessName').textContent = process.name;
            document.getElementById('viewProcessType').textContent = getProcessTypeName(process.type);
            document.getElementById('viewProcessPriority').textContent = getPriorityName(process.priority);
            document.getElementById('viewProcessTimeout').textContent = process.timeout + ' 小时';
            document.getElementById('viewProcessDescription').textContent = process.description;

            // 填充流程步骤
            const stepsContainer = document.getElementById('viewProcessSteps');
            stepsContainer.innerHTML = '';
            
            process.steps.forEach(step => {
                const stepHtml = `
                    <div class="flex items-center justify-between p-3 bg-white rounded border">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
                                <span class="text-sm font-medium text-blue-600">${step.stepNumber}</span>
                            </div>
                            <div>
                                <div class="font-medium text-gray-900">${step.name}</div>
                                <div class="text-sm text-gray-500">${getStepTypeName(step.type)} • ${step.assignee}</div>
                            </div>
                        </div>
                        <div class="text-sm text-gray-500">
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>
                `;
                stepsContainer.insertAdjacentHTML('beforeend', stepHtml);
            });

            // 填充条件配置
            const conditionsContainer = document.getElementById('viewProcessConditions');
            conditionsContainer.innerHTML = '';
            
            if (process.conditions.length === 0) {
                conditionsContainer.innerHTML = '<p class="text-gray-500 text-sm">暂无条件配置</p>';
            } else {
                process.conditions.forEach(condition => {
                    const conditionHtml = `
                        <div class="p-3 bg-white rounded border">
                            <div class="text-sm text-gray-900">
                                <span class="font-medium">${condition.field}</span>
                                <span class="mx-2">${getOperatorName(condition.operator)}</span>
                                <span class="font-medium">${condition.value}</span>
                                <span class="mx-2">→</span>
                                <span class="font-medium">${condition.nextStep}</span>
                            </div>
                        </div>
                    `;
                    conditionsContainer.insertAdjacentHTML('beforeend', conditionHtml);
                });
            }

            // 填充权限设置
            document.getElementById('viewProcessInitiators').innerHTML = process.permissions.initiators.map(item => 
                `<span class="inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded mr-1 mb-1">${item}</span>`
            ).join('');
            
            document.getElementById('viewProcessViewers').innerHTML = process.permissions.viewers.map(item => 
                `<span class="inline-block bg-green-100 text-green-800 text-xs px-2 py-1 rounded mr-1 mb-1">${item}</span>`
            ).join('');
            
            document.getElementById('viewProcessNotifications').innerHTML = process.permissions.notifications.map(item => 
                `<span class="inline-block bg-purple-100 text-purple-800 text-xs px-2 py-1 rounded mr-1 mb-1">${item}</span>`
            ).join('');

            // 填充统计信息
            document.getElementById('viewProcessTotalRuns').textContent = process.statistics.totalRuns;
            document.getElementById('viewProcessSuccessRate').textContent = process.statistics.successRate + '%';
            document.getElementById('viewProcessAvgDuration').textContent = process.statistics.avgDuration + 'h';
            document.getElementById('viewProcessTimeoutCount').textContent = process.statistics.timeoutCount;
        }

        function getProcessTypeName(type) {
            const typeNames = {
                'approval': '审批流程',
                'security': '安全流程',
                'quality': '质量检查流程',
                'custom': '自定义流程'
            };
            return typeNames[type] || type;
        }

        function getPriorityName(priority) {
            const priorityNames = {
                'low': '低',
                'medium': '中',
                'high': '高'
            };
            return priorityNames[priority] || priority;
        }

        function getStepTypeName(type) {
            const typeNames = {
                'submit': '数据提交',
                'review': '审核',
                'approve': '审批',
                'check': '检查'
            };
            return typeNames[type] || type;
        }

        function getOperatorName(operator) {
            const operatorNames = {
                'equals': '等于',
                'not_equals': '不等于',
                'contains': '包含',
                'greater_than': '大于',
                'less_than': '小于'
            };
            return operatorNames[operator] || operator;
        }

        function deleteProcess(id) {
            if (confirm('确定要删除这个流程吗？此操作不可恢复！')) {
                // 模拟删除操作
                console.log('删除流程:', id);
                alert('流程删除成功！');
                
                // 这里可以添加实际的删除逻辑
                // 比如从DOM中移除对应的流程卡片
                const processCard = document.querySelector(`[data-process-id="${id}"]`);
                if (processCard) {
                    processCard.remove();
                }
            }
        }

        // 流程记录相关函数
        let currentPage = 1;
        const pageSize = 10;
        let filteredRecords = [];

        // 模拟记录数据
        const mockRecords = [
            {
                id: 'record-001',
                timestamp: '2024-02-15 14:30:25',
                operationType: 'edit',
                processName: '数据质量检查流程',
                operator: '张三',
                details: '修改了审批节点配置，更新了步骤2的审批人',
                status: 'success',
                ip: '192.168.1.100',
                duration: '2分钟',
                changes: {
                    before: '审批人: 李四',
                    after: '审批人: 王五'
                }
            },
            {
                id: 'record-002',
                timestamp: '2024-02-15 13:15:10',
                operationType: 'start',
                processName: '安全审批流程',
                operator: '系统自动',
                details: '自动触发安全检查，检测到新的数据资产',
                status: 'success',
                ip: '系统自动',
                duration: '5分钟',
                changes: null
            },
            {
                id: 'record-003',
                timestamp: '2024-02-15 11:45:30',
                operationType: 'complete',
                processName: '数据质量检查流程',
                operator: '李四',
                details: '审批通过：用户画像数据集，质量检查全部通过',
                status: 'success',
                ip: '192.168.1.101',
                duration: '15分钟',
                changes: null
            },
            {
                id: 'record-004',
                timestamp: '2024-02-15 10:20:15',
                operationType: 'create',
                processName: '数据备份流程',
                operator: '王五',
                details: '创建了新的数据备份流程，包含3个步骤',
                status: 'success',
                ip: '192.168.1.102',
                duration: '8分钟',
                changes: null
            },
            {
                id: 'record-005',
                timestamp: '2024-02-15 09:30:45',
                operationType: 'reject',
                processName: '安全审批流程',
                operator: '赵六',
                details: '拒绝审批：数据脱敏不完整，需要重新处理',
                status: 'rejected',
                ip: '192.168.1.103',
                duration: '3分钟',
                changes: {
                    reason: '数据脱敏不完整',
                    suggestion: '需要重新进行数据脱敏处理'
                }
            },
            {
                id: 'record-006',
                timestamp: '2024-02-15 08:15:20',
                operationType: 'delete',
                processName: '旧版本审批流程',
                operator: '管理员',
                details: '删除了过时的审批流程',
                status: 'success',
                ip: '192.168.1.104',
                duration: '1分钟',
                changes: null
            },
            {
                id: 'record-007',
                timestamp: '2024-02-14 16:45:30',
                operationType: 'approve',
                processName: '数据质量检查流程',
                operator: '张三',
                details: '审批通过：客户行为分析数据集',
                status: 'success',
                ip: '192.168.1.100',
                duration: '12分钟',
                changes: null
            },
            {
                id: 'record-008',
                timestamp: '2024-02-14 15:20:10',
                operationType: 'edit',
                processName: '安全审批流程',
                operator: '李四',
                details: '修改了流程超时设置，从30分钟改为45分钟',
                status: 'success',
                ip: '192.168.1.101',
                duration: '2分钟',
                changes: {
                    before: '超时时间: 30分钟',
                    after: '超时时间: 45分钟'
                }
            }
        ];

        // 初始化记录列表
        function initRecords() {
            filteredRecords = [...mockRecords];
            renderRecords();
        }

        // 筛选记录
        function filterRecords() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            const operationType = document.getElementById('operationType').value;
            const processName = document.getElementById('processName').value;
            const operator = document.getElementById('operator').value;

            filteredRecords = mockRecords.filter(record => {
                let match = true;

                // 时间范围筛选
                if (startDate && record.timestamp < startDate + ' 00:00:00') {
                    match = false;
                }
                if (endDate && record.timestamp > endDate + ' 23:59:59') {
                    match = false;
                }

                // 操作类型筛选
                if (operationType && record.operationType !== operationType) {
                    match = false;
                }

                // 流程名称筛选
                if (processName && record.processName !== processName) {
                    match = false;
                }

                // 操作人筛选
                if (operator && !record.operator.includes(operator)) {
                    match = false;
                }

                return match;
            });

            currentPage = 1;
            renderRecords();
        }

        // 重置筛选条件
        function resetFilters() {
            document.getElementById('startDate').value = '';
            document.getElementById('endDate').value = '';
            document.getElementById('operationType').value = '';
            document.getElementById('processName').value = '';
            document.getElementById('operator').value = '';
            
            filteredRecords = [...mockRecords];
            currentPage = 1;
            renderRecords();
        }

        // 渲染记录列表
        function renderRecords() {
            const tbody = document.getElementById('recordsTableBody');
            const startIndex = (currentPage - 1) * pageSize;
            const endIndex = startIndex + pageSize;
            const pageRecords = filteredRecords.slice(startIndex, endIndex);

            tbody.innerHTML = '';

            pageRecords.forEach(record => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                const operationTypeClass = getOperationTypeClass(record.operationType);
                const statusClass = getStatusClass(record.status);
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${record.timestamp}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="${operationTypeClass} px-2 inline-flex text-xs leading-5 font-semibold rounded-full">
                            ${getOperationTypeText(record.operationType)}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${record.processName}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${record.operator}</td>
                    <td class="px-6 py-4 text-sm text-gray-900 max-w-xs truncate">${record.details}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="${statusClass} px-2 inline-flex text-xs leading-5 font-semibold rounded-full">
                            ${getStatusText(record.status)}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button onclick="viewRecordDetail('${record.id}')" class="text-blue-600 hover:text-blue-900 mr-3">查看详情</button>
                    </td>
                `;
                
                tbody.appendChild(row);
            });

            updatePagination();
        }

        // 获取操作类型样式类
        function getOperationTypeClass(type) {
            const classes = {
                'create': 'bg-green-100 text-green-800',
                'edit': 'bg-blue-100 text-blue-800',
                'delete': 'bg-red-100 text-red-800',
                'start': 'bg-purple-100 text-purple-800',
                'complete': 'bg-green-100 text-green-800',
                'approve': 'bg-green-100 text-green-800',
                'reject': 'bg-red-100 text-red-800'
            };
            return classes[type] || 'bg-gray-100 text-gray-800';
        }

        // 获取操作类型文本
        function getOperationTypeText(type) {
            const texts = {
                'create': '创建流程',
                'edit': '编辑流程',
                'delete': '删除流程',
                'start': '启动流程',
                'complete': '完成流程',
                'approve': '审批操作',
                'reject': '拒绝操作'
            };
            return texts[type] || type;
        }

        // 获取状态样式类
        function getStatusClass(status) {
            const classes = {
                'success': 'bg-green-100 text-green-800',
                'pending': 'bg-yellow-100 text-yellow-800',
                'rejected': 'bg-red-100 text-red-800',
                'error': 'bg-red-100 text-red-800'
            };
            return classes[status] || 'bg-gray-100 text-gray-800';
        }

        // 获取状态文本
        function getStatusText(status) {
            const texts = {
                'success': '成功',
                'pending': '处理中',
                'rejected': '已拒绝',
                'error': '异常'
            };
            return texts[status] || status;
        }



        // 分页相关函数
        function updatePagination() {
            const totalPages = Math.ceil(filteredRecords.length / pageSize);
            const startRecord = (currentPage - 1) * pageSize + 1;
            const endRecord = Math.min(currentPage * pageSize, filteredRecords.length);

            document.getElementById('startRecord').textContent = startRecord;
            document.getElementById('endRecord').textContent = endRecord;
            document.getElementById('totalCount').textContent = filteredRecords.length;

            // 更新分页按钮状态
            const pageButtons = document.querySelectorAll('.page-btn');
            pageButtons.forEach(btn => {
                btn.classList.remove('bg-blue-50', 'border-blue-500', 'text-blue-600');
                btn.classList.add('bg-white', 'border-gray-300', 'text-gray-700');
            });

            // 高亮当前页
            const currentPageBtn = document.querySelector(`[onclick="goToPage(${currentPage})"]`);
            if (currentPageBtn) {
                currentPageBtn.classList.remove('bg-white', 'border-gray-300', 'text-gray-700');
                currentPageBtn.classList.add('bg-blue-50', 'border-blue-500', 'text-blue-600');
            }
        }

        function previousPage() {
            if (currentPage > 1) {
                currentPage--;
                renderRecords();
            }
        }

        function nextPage() {
            const totalPages = Math.ceil(filteredRecords.length / pageSize);
            if (currentPage < totalPages) {
                currentPage++;
                renderRecords();
            }
        }

        function goToPage(page) {
            const totalPages = Math.ceil(filteredRecords.length / pageSize);
            if (page >= 1 && page <= totalPages) {
                currentPage = page;
                renderRecords();
            }
        }



        // 查看记录详情
        function viewRecordDetail(recordId) {
            const record = mockRecords.find(r => r.id === recordId);
            if (!record) return;

            // 填充基本信息
            document.getElementById('recordTimestamp').textContent = record.timestamp;
            document.getElementById('recordOperationType').textContent = getOperationTypeText(record.operationType);
            document.getElementById('recordProcessName').textContent = record.processName;
            document.getElementById('recordOperator').textContent = record.operator;
            document.getElementById('recordIP').textContent = record.ip;
            document.getElementById('recordDuration').textContent = record.duration;
            document.getElementById('recordStatus').textContent = getStatusText(record.status);
            document.getElementById('recordDetails').textContent = record.details;

            // 处理变更信息
            const changesSection = document.getElementById('recordChangesSection');
            if (record.changes && record.changes.before && record.changes.after) {
                document.getElementById('recordChangesBefore').textContent = record.changes.before;
                document.getElementById('recordChangesAfter').textContent = record.changes.after;
                changesSection.classList.remove('hidden');
            } else {
                changesSection.classList.add('hidden');
            }

            // 处理拒绝信息
            const rejectSection = document.getElementById('recordRejectSection');
            if (record.changes && record.changes.reason) {
                document.getElementById('recordRejectReason').textContent = record.changes.reason;
                document.getElementById('recordRejectSuggestion').textContent = record.changes.suggestion || '无';
                rejectSection.classList.remove('hidden');
            } else {
                rejectSection.classList.add('hidden');
            }

            // 显示模态框
            document.getElementById('recordDetailModal').classList.remove('hidden');
        }

        // 关闭记录详情模态框
        function closeRecordDetailModal() {
            document.getElementById('recordDetailModal').classList.add('hidden');
        }

        // 流程监督相关功能
        let processChart = null;
        let currentChartPeriod = 'day';

        // 初始化流程执行趋势图表
        function initProcessChart() {
            const ctx = document.getElementById('processChart');
            if (!ctx) return;
            
            processChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: '完成流程数',
                        data: [],
                        borderColor: '#3B82F6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4,
                        fill: true,
                        pointBackgroundColor: '#3B82F6',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 4
                    }, {
                        label: '异常流程数',
                        data: [],
                        borderColor: '#EF4444',
                        backgroundColor: 'rgba(239, 68, 68, 0.1)',
                        tension: 0.4,
                        fill: true,
                        pointBackgroundColor: '#EF4444',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                usePointStyle: true,
                                padding: 20,
                                font: {
                                    size: 12
                                }
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#ffffff',
                            bodyColor: '#ffffff',
                            borderColor: '#3B82F6',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            ticks: {
                                font: {
                                    size: 11
                                }
                            }
                        },
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            },
                            ticks: {
                                font: {
                                    size: 11
                                }
                            }
                        }
                    },
                    interaction: {
                        mode: 'nearest',
                        axis: 'x',
                        intersect: false
                    }
                }
            });
            
            updateChartData('day');
        }

        // 更新图表数据
        function updateChartData(period) {
            if (!processChart) return;
            
            currentChartPeriod = period;
            
            // 更新按钮状态
            document.querySelectorAll('[onclick^="updateChartData"]').forEach(btn => {
                btn.className = 'px-3 py-1 text-xs bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200';
            });
            event.target.className = 'px-3 py-1 text-xs bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200';
            
            // 生成模拟数据
            let labels = [];
            let completedData = [];
            let errorData = [];
            
            if (period === 'day') {
                labels = ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', '24:00'];
                completedData = [5, 8, 15, 25, 18, 12, 8];
                errorData = [1, 2, 3, 1, 2, 1, 0];
            } else if (period === 'week') {
                labels = ['周一', '周二', '周三', '周四', '周五', '周六', '周日'];
                completedData = [45, 52, 48, 61, 58, 35, 28];
                errorData = [3, 2, 4, 1, 3, 2, 1];
            } else if (period === 'month') {
                labels = ['第1周', '第2周', '第3周', '第4周'];
                completedData = [280, 320, 295, 310];
                errorData = [15, 12, 18, 14];
            }
            
            processChart.data.labels = labels;
            processChart.data.datasets[0].data = completedData;
            processChart.data.datasets[1].data = errorData;
            processChart.update('active');
        }

        // 页面加载时初始化记录
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化记录列表
            initRecords();
            
            // 设置默认日期范围（最近7天）
            const today = new Date();
            const sevenDaysAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000);
            
            document.getElementById('endDate').value = today.toISOString().split('T')[0];
            document.getElementById('startDate').value = sevenDaysAgo.toISOString().split('T')[0];
            
            // 初始化流程执行趋势图表
            initProcessChart();
        });
    </script>
    
    <script>
    // 用户下拉菜单切换
    function toggleUserDropdown() {
      const dropdownMenu = document.getElementById('user-dropdown-menu');
      const arrow = document.getElementById('dropdown-arrow');
      
      if (dropdownMenu.classList.contains('hidden')) {
        dropdownMenu.classList.remove('hidden');
        arrow.style.transform = 'rotate(180deg)';
      } else {
        dropdownMenu.classList.add('hidden');
        arrow.style.transform = 'rotate(0deg)';
      }
    }
    
    // 点击外部关闭下拉菜单
    document.addEventListener('click', function(event) {
      const dropdown = document.getElementById('user-dropdown');
      const dropdownMenu = document.getElementById('user-dropdown-menu');
      const arrow = document.getElementById('dropdown-arrow');
      
      if (!dropdown.contains(event.target)) {
        dropdownMenu.classList.add('hidden');
        arrow.style.transform = 'rotate(0deg)';
      }
    });
    </script>

    <!-- 记录详情模态框 -->
    <div id="recordDetailModal" class="fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-5 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white">
            <div class="mt-3">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-lg font-medium text-gray-900">记录详情</h3>
                    <button onclick="closeRecordDetailModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>

                <div class="space-y-6">
                    <!-- 基本信息 -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h4 class="text-md font-medium text-gray-900 mb-3">基本信息</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-600">操作时间</label>
                                <p id="recordTimestamp" class="text-sm text-gray-900 mt-1">-</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600">操作类型</label>
                                <p id="recordOperationType" class="text-sm text-gray-900 mt-1">-</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600">流程名称</label>
                                <p id="recordProcessName" class="text-sm text-gray-900 mt-1">-</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600">操作人</label>
                                <p id="recordOperator" class="text-sm text-gray-900 mt-1">-</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600">IP地址</label>
                                <p id="recordIP" class="text-sm text-gray-900 mt-1">-</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600">耗时</label>
                                <p id="recordDuration" class="text-sm text-gray-900 mt-1">-</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600">状态</label>
                                <p id="recordStatus" class="text-sm text-gray-900 mt-1">-</p>
                            </div>
                        </div>
                    </div>

                    <!-- 操作详情 -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h4 class="text-md font-medium text-gray-900 mb-3">操作详情</h4>
                        <div class="bg-white rounded-lg p-4 border">
                            <p id="recordDetails" class="text-sm text-gray-900">-</p>
                        </div>
                    </div>

                    <!-- 变更信息 -->
                    <div id="recordChangesSection" class="bg-gray-50 rounded-lg p-4 hidden">
                        <h4 class="text-md font-medium text-gray-900 mb-3">变更信息</h4>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-600">变更前</label>
                                <div class="bg-white rounded-lg p-3 border mt-1">
                                    <p id="recordChangesBefore" class="text-sm text-gray-900">-</p>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600">变更后</label>
                                <div class="bg-white rounded-lg p-3 border mt-1">
                                    <p id="recordChangesAfter" class="text-sm text-gray-900">-</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 拒绝原因 -->
                    <div id="recordRejectSection" class="bg-gray-50 rounded-lg p-4 hidden">
                        <h4 class="text-md font-medium text-gray-900 mb-3">拒绝原因</h4>
                        <div class="space-y-3">
                            <div>
                                <label class="block text-sm font-medium text-gray-600">拒绝原因</label>
                                <div class="bg-white rounded-lg p-3 border mt-1">
                                    <p id="recordRejectReason" class="text-sm text-gray-900">-</p>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600">处理建议</label>
                                <div class="bg-white rounded-lg p-3 border mt-1">
                                    <p id="recordRejectSuggestion" class="text-sm text-gray-900">-</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>